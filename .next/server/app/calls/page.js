(()=>{var e={};e.id=948,e.ids=[948],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},8086:e=>{"use strict";e.exports=require("module")},33873:e=>{"use strict";e.exports=require("path")},86113:(e,t,l)=>{"use strict";l.r(t),l.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=l(70260),r=l(28203),a=l(25155),i=l.n(a),o=l(67292),n={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);l.d(t,n);let d=["",{children:["calls",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(l.bind(l,21123)),"C:\\Users\\swizz\\Desktop\\Emailer\\emailer\\src\\app\\calls\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(l.bind(l,71354)),"C:\\Users\\swizz\\Desktop\\Emailer\\emailer\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(l.t.bind(l,19937,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\swizz\\Desktop\\Emailer\\emailer\\src\\app\\calls\\page.tsx"],x={require:l,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/calls/page",pathname:"/calls",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},12597:(e,t,l)=>{Promise.resolve().then(l.bind(l,21123))},54453:(e,t,l)=>{Promise.resolve().then(l.bind(l,56271))},56271:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>x});var s=l(45512),r=l(58009),a=l(46464),i=l(19311),o=l(81280),n=l(70046);let d=[{value:"answered",label:"✅ Answered",color:"#22c55e"},{value:"voicemail",label:"\uD83D\uDCDE Voicemail",color:"#f59e0b"},{value:"no_answer",label:"❌ No Answer",color:"#ef4444"},{value:"busy",label:"\uD83D\uDD34 Busy",color:"#f97316"},{value:"wrong_number",label:"⚠️ Wrong Number",color:"#6b7280"},{value:"callback_requested",label:"\uD83D\uDD04 Callback",color:"#3b82f6"}];function c(){let[e,t]=(0,r.useState)(null),[l,c]=(0,r.useState)("today"),[x,m]=(0,r.useState)(null),[h,u]=(0,r.useState)("answered"),[p,b]=(0,r.useState)(""),[g,v]=(0,r.useState)(""),[w,f]=(0,r.useState)(!1),j=(0,a.IT)(i.FH.activities.getCallStats),N=(0,a.IT)(i.FH.activities.getTodayFollowUps),y=(0,a.IT)(i.FH.activities.getRecentActivity,{limit:30}),C=(0,a.IT)(i.FH.contacts.list,{}),D=(0,a.n_)(i.FH.activities.logCall),_=[...C?.filter(e=>e.phone&&"active"===e.status)||[]].sort((e,t)=>{let l=e.nextFollowUpAt&&e.nextFollowUpAt<=Date.now(),s=t.nextFollowUpAt&&t.nextFollowUpAt<=Date.now();return l&&!s?-1:!l&&s?1:(e.lastCallAt||0)-(t.lastCallAt||0)}),k=async()=>{if(x){f(!0);try{await D({contactId:x,outcome:h,notes:p||void 0,followUpAt:g?new Date(g).getTime():void 0}),m(null),b(""),v(""),u("answered")}catch(e){console.error(e)}finally{f(!1)}}},A=e=>{let t=new Date(e),l=new Date().getTime()-e;return l<6e4?"Just now":l<36e5?`${Math.floor(l/6e4)}m ago`:l<864e5?`${Math.floor(l/36e5)}h ago`:l<6048e5?`${Math.floor(l/864e5)}d ago`:t.toLocaleDateString()},F=e=>{switch(e){case"email_sent":return"\uD83D\uDCE7";case"email_opened":return"\uD83D\uDC41️";case"call_made":case"voicemail_left":return"\uD83D\uDCDE";case"note_added":return"\uD83D\uDCDD";case"status_changed":return"\uD83D\uDD04";case"follow_up_scheduled":return"⏰";default:return"•"}};return(0,s.jsxs)("div",{className:"min-h-screen bg-[#0a0a0f]",children:[(0,s.jsx)(o.j,{}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-br from-green-500/20 to-green-600/10 border border-green-500/20 rounded-xl p-4",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-green-400",children:j?.today||0}),(0,s.jsx)("div",{className:"text-sm text-white/50",children:"Calls Today"})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-blue-500/20 to-blue-600/10 border border-blue-500/20 rounded-xl p-4",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-blue-400",children:j?.week||0}),(0,s.jsx)("div",{className:"text-sm text-white/50",children:"This Week"})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-purple-500/20 to-purple-600/10 border border-purple-500/20 rounded-xl p-4",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-purple-400",children:j?.month||0}),(0,s.jsx)("div",{className:"text-sm text-white/50",children:"This Month"})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-amber-500/20 to-amber-600/10 border border-amber-500/20 rounded-xl p-4",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-amber-400",children:N?.length||0}),(0,s.jsx)("div",{className:"text-sm text-white/50",children:"Follow-ups Due"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,s.jsx)("button",{onClick:()=>c("today"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${"today"===l?"bg-indigo-500 text-white":"bg-white/5 text-white/60 hover:bg-white/10"}`,children:"\uD83D\uDCDE Call Queue"}),(0,s.jsxs)("button",{onClick:()=>c("followups"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${"followups"===l?"bg-amber-500 text-white":"bg-white/5 text-white/60 hover:bg-white/10"}`,children:["⏰ Follow-ups (",N?.length||0,")"]}),(0,s.jsx)("button",{onClick:()=>c("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${"all"===l?"bg-white/20 text-white":"bg-white/5 text-white/60 hover:bg-white/10"}`,children:"\uD83D\uDCCA Activity Feed"})]}),"today"===l&&(0,s.jsxs)("div",{className:"bg-[#12121f] rounded-xl border border-white/10 overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-white/10",children:[(0,s.jsx)("h2",{className:"font-semibold",children:"Call Queue"}),(0,s.jsx)("p",{className:"text-sm text-white/50",children:"Contacts with phone numbers, sorted by priority"})]}),_.length>0?(0,s.jsx)("div",{className:"divide-y divide-white/5",children:_.slice(0,20).map(e=>(0,s.jsxs)("div",{className:"p-4 hover:bg-white/5 transition-colors flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center font-bold flex-shrink-0",children:(e.name||e.email).charAt(0).toUpperCase()}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"font-medium truncate",children:e.name||e.email}),(0,s.jsx)("div",{className:"text-sm text-white/50 truncate",children:e.company||e.email}),e.nextFollowUpAt&&e.nextFollowUpAt<=Date.now()&&(0,s.jsx)("div",{className:"text-xs text-amber-400 mt-1",children:"⏰ Follow-up due"})]}),(0,s.jsxs)("div",{className:"text-right text-sm text-white/50 hidden md:block",children:[(0,s.jsxs)("div",{children:[e.callCount||0," calls"]}),(0,s.jsx)("div",{children:e.lastCallAt?A(e.lastCallAt):"Never called"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("a",{href:`tel:${e.phone}`,onClick:()=>m(e._id),className:"px-4 py-2 bg-green-500/20 border border-green-500/30 text-green-400 rounded-lg hover:bg-green-500/30 transition-colors flex items-center gap-2",children:"\uD83D\uDCDE Call"}),(0,s.jsx)("button",{onClick:()=>t(e._id),className:"px-3 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors text-sm",children:"View"})]})]},e._id))}):(0,s.jsxs)("div",{className:"p-12 text-center text-white/40",children:[(0,s.jsx)("p",{className:"text-4xl mb-2",children:"\uD83D\uDCDE"}),(0,s.jsx)("p",{children:"No contacts with phone numbers"}),(0,s.jsx)("p",{className:"text-sm",children:"Add phone numbers to contacts to start calling"})]})]}),"followups"===l&&(0,s.jsxs)("div",{className:"bg-[#12121f] rounded-xl border border-white/10 overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-white/10",children:[(0,s.jsx)("h2",{className:"font-semibold",children:"Follow-ups Due Today"}),(0,s.jsx)("p",{className:"text-sm text-white/50",children:"Contacts that need your attention"})]}),N&&N.length>0?(0,s.jsx)("div",{className:"divide-y divide-white/5",children:N.map(e=>(0,s.jsxs)("div",{className:"p-4 hover:bg-white/5 transition-colors flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center font-bold flex-shrink-0",children:(e.name||e.email).charAt(0).toUpperCase()}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"font-medium truncate",children:e.name||e.email}),(0,s.jsx)("div",{className:"text-sm text-white/50 truncate",children:e.company||e.email}),(0,s.jsxs)("div",{className:"text-xs text-amber-400 mt-1",children:["Scheduled: ",e.nextFollowUpAt?new Date(e.nextFollowUpAt).toLocaleTimeString():"Today"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e.phone&&(0,s.jsx)("a",{href:`tel:${e.phone}`,onClick:()=>m(e._id),className:"px-4 py-2 bg-green-500/20 border border-green-500/30 text-green-400 rounded-lg hover:bg-green-500/30 transition-colors",children:"\uD83D\uDCDE Call"}),(0,s.jsx)("a",{href:`mailto:${e.email}`,className:"px-3 py-2 bg-blue-500/20 border border-blue-500/30 text-blue-400 rounded-lg hover:bg-blue-500/30 transition-colors",children:"\uD83D\uDCE7"}),(0,s.jsx)("button",{onClick:()=>t(e._id),className:"px-3 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors text-sm",children:"View"})]})]},e._id))}):(0,s.jsxs)("div",{className:"p-12 text-center text-white/40",children:[(0,s.jsx)("p",{className:"text-4xl mb-2",children:"✅"}),(0,s.jsx)("p",{children:"No follow-ups due today"}),(0,s.jsx)("p",{className:"text-sm",children:"You're all caught up!"})]})]}),"all"===l&&(0,s.jsxs)("div",{className:"bg-[#12121f] rounded-xl border border-white/10 overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-white/10",children:[(0,s.jsx)("h2",{className:"font-semibold",children:"Recent Activity"}),(0,s.jsx)("p",{className:"text-sm text-white/50",children:"Your latest interactions"})]}),y&&y.length>0?(0,s.jsx)("div",{className:"divide-y divide-white/5",children:y.map(e=>(0,s.jsxs)("div",{className:"p-4 hover:bg-white/5 transition-colors flex items-start gap-3",children:[(0,s.jsx)("div",{className:"text-xl",children:F(e.type)}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,s.jsx)("span",{className:"font-medium capitalize",children:e.type.replace(/_/g," ")}),e.callOutcome&&(0,s.jsx)("span",{className:"px-2 py-0.5 rounded text-xs",style:{backgroundColor:`${d.find(t=>t.value===e.callOutcome)?.color}20`,color:d.find(t=>t.value===e.callOutcome)?.color},children:e.callOutcome.replace(/_/g," ")})]}),e.contact&&(0,s.jsxs)("div",{className:"text-sm text-white/60 mt-0.5",children:[e.contact.name||e.contact.email,e.contact.company&&` • ${e.contact.company}`]}),e.notes&&(0,s.jsx)("div",{className:"text-sm text-white/50 mt-1",children:e.notes})]}),(0,s.jsx)("div",{className:"text-xs text-white/40",children:A(e.createdAt)})]},e._id))}):(0,s.jsxs)("div",{className:"p-12 text-center text-white/40",children:[(0,s.jsx)("p",{className:"text-4xl mb-2",children:"\uD83D\uDCCA"}),(0,s.jsx)("p",{children:"No activity yet"}),(0,s.jsx)("p",{className:"text-sm",children:"Start calling or emailing to see activity here"})]})]})]}),e&&(0,s.jsx)(n.A,{contactId:e,onClose:()=>t(null)}),x&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-[#12121f] rounded-xl p-6 w-full max-w-md border border-white/10",children:[(0,s.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Log Call Outcome"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2 mb-4",children:d.map(e=>(0,s.jsx)("button",{onClick:()=>u(e.value),className:`p-3 rounded-lg text-sm font-medium transition-all ${h===e.value?"ring-2 ring-offset-2 ring-offset-[#12121f]":"opacity-60 hover:opacity-100"}`,style:{backgroundColor:`${e.color}20`,color:e.color},children:e.label},e.value))}),(0,s.jsx)("textarea",{value:p,onChange:e=>b(e.target.value),placeholder:"Call notes (optional)",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg mb-4 resize-none h-24"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"text-sm text-white/50 mb-1 block",children:"Schedule follow-up"}),(0,s.jsx)("input",{type:"datetime-local",value:g,onChange:e=>v(e.target.value),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg"})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>{m(null),b(""),v("")},className:"flex-1 px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:"Skip"}),(0,s.jsx)("button",{onClick:k,disabled:w,className:"flex-1 px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-lg font-medium disabled:opacity-50",children:w?"Saving...":"Save & Next"})]})]})})]})}function x(){return(0,s.jsx)(o.q,{children:(0,s.jsx)(c,{})})}},21123:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>s});let s=(0,l(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\swizz\\\\Desktop\\\\Emailer\\\\emailer\\\\src\\\\app\\\\calls\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\swizz\\Desktop\\Emailer\\emailer\\src\\app\\calls\\page.tsx","default")}};var t=require("../../webpack-runtime.js");t.C(e);var l=e=>t(t.s=e),s=t.X(0,[989,952,987,817,300],()=>l(86113));module.exports=s})();
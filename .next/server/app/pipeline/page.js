(()=>{var e={};e.id=161,e.ids=[161],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},8086:e=>{"use strict";e.exports=require("module")},33873:e=>{"use strict";e.exports=require("path")},77963:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>d,routeModule:()=>m,tree:()=>c});var r=t(70260),l=t(28203),a=t(25155),n=t.n(a),i=t(67292),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(s,o);let c=["",{children:["pipeline",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,64330)),"C:\\Users\\swizz\\Desktop\\Emailer\\emailer\\src\\app\\pipeline\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,71354)),"C:\\Users\\swizz\\Desktop\\Emailer\\emailer\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,19937,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\swizz\\Desktop\\Emailer\\emailer\\src\\app\\pipeline\\page.tsx"],p={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:l.RouteKind.APP_PAGE,page:"/pipeline/page",pathname:"/pipeline",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},33678:(e,s,t)=>{Promise.resolve().then(t.bind(t,64330))},73430:(e,s,t)=>{Promise.resolve().then(t.bind(t,87902))},87902:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var r=t(45512),l=t(58009),a=t(46464),n=t(19311),i=t(81280),o=t(70046);let c=[{id:"new",label:"New Leads",color:"#6366f1",icon:"✨"},{id:"contacted",label:"Contacted",color:"#3b82f6",icon:"\uD83D\uDCE7"},{id:"follow_up",label:"Follow Up",color:"#f59e0b",icon:"\uD83D\uDD04"},{id:"qualified",label:"Qualified",color:"#8b5cf6",icon:"⭐"},{id:"closed_won",label:"Closed Won",color:"#22c55e",icon:"\uD83C\uDF89"},{id:"closed_lost",label:"Closed Lost",color:"#ef4444",icon:"❌"}];function d(){let[e,s]=(0,l.useState)(null),[t,d]=(0,l.useState)(null),[p,m]=(0,l.useState)(null),x=(0,a.IT)(n.FH.contacts.list,{}),u=(0,a.n_)(n.FH.activities.updateSalesStage),h=c.reduce((e,s)=>(e[s.id]=(x||[]).filter(e=>(e.salesStage||"new")===s.id),e),{}),f=(e,s)=>{d(s),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",s)},g=(e,s)=>{e.preventDefault(),e.dataTransfer.dropEffect="move",m(s)},b=()=>{m(null)},j=async(e,s)=>{if(e.preventDefault(),m(null),t)try{await u({contactId:t,stage:s})}catch(e){console.error("Failed to update stage:",e)}d(null)},v=()=>{d(null),m(null)},N=e=>{let s=Date.now()-e;return s<36e5?`${Math.floor(s/6e4)}m ago`:s<864e5?`${Math.floor(s/36e5)}h ago`:`${Math.floor(s/864e5)}d ago`},w=x?.length||0,C=h.closed_won?.length||0,D=h.closed_lost?.length||0;return(0,r.jsxs)("div",{className:"min-h-screen bg-[#0a0a0f] pb-20 md:pb-0",children:[(0,r.jsx)(i.j,{}),(0,r.jsxs)("main",{className:"px-4 sm:px-6 lg:px-8 py-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Sales Pipeline"}),(0,r.jsx)("p",{className:"text-white/50 text-sm",children:"Drag contacts to move through stages"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-white/50",children:"Total:"}),(0,r.jsx)("span",{className:"font-medium",children:w})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-green-400",children:"Won:"}),(0,r.jsx)("span",{className:"font-medium text-green-400",children:C})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-red-400",children:"Lost:"}),(0,r.jsx)("span",{className:"font-medium text-red-400",children:D})]})]})]}),(0,r.jsx)("div",{className:"flex gap-4 overflow-x-auto pb-4 snap-x snap-mandatory",children:c.map(e=>(0,r.jsxs)("div",{className:`flex-shrink-0 w-72 snap-start transition-all duration-200 ${p===e.id?"scale-[1.02]":""}`,onDragOver:s=>g(s,e.id),onDragLeave:b,onDrop:s=>j(s,e.id),children:[(0,r.jsxs)("div",{className:"rounded-t-xl p-3 flex items-center justify-between",style:{backgroundColor:`${e.color}20`},children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{children:e.icon}),(0,r.jsx)("span",{className:"font-medium",style:{color:e.color},children:e.label})]}),(0,r.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-bold",style:{backgroundColor:e.color,color:"#000"},children:h[e.id]?.length||0})]}),(0,r.jsxs)("div",{className:`bg-[#12121f] rounded-b-xl border border-white/10 min-h-[400px] p-2 space-y-2 transition-colors ${p===e.id?"border-2":""}`,style:{borderColor:p===e.id?e.color:void 0},children:[h[e.id]?.map(l=>r.jsxs("div",{draggable:!0,onDragStart:e=>f(e,l._id),onDragEnd:v,onClick:()=>s(l._id),className:`bg-black/40 rounded-lg p-3 cursor-grab active:cursor-grabbing hover:bg-black/60 transition-all border border-white/5 hover:border-white/20 ${t===l._id?"opacity-50 scale-95":""}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0",style:{backgroundColor:`${e.color}30`,color:e.color},children:(l.name||l.email).charAt(0).toUpperCase()}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("div",{className:"font-medium text-sm truncate",children:l.name||l.email.split("@")[0]}),l.company&&r.jsx("div",{className:"text-xs text-white/50 truncate",children:l.company})]})]}),r.jsx("div",{className:"text-xs text-white/40 truncate mb-2",children:l.email}),r.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/50",children:[(l.emailCount??0)>0&&r.jsxs("span",{className:"flex items-center gap-1",children:["\uD83D\uDCE7 ",l.emailCount]}),(l.callCount??0)>0&&r.jsxs("span",{className:"flex items-center gap-1",children:["\uD83D\uDCDE ",l.callCount]}),l.lastEmailAt&&r.jsx("span",{className:"text-white/30",children:N(l.lastEmailAt)})]}),r.jsxs("div",{className:"flex items-center gap-1 mt-2 pt-2 border-t border-white/5",children:[l.phone&&r.jsx("a",{href:`tel:${l.phone}`,onClick:e=>e.stopPropagation(),className:"p-1.5 hover:bg-green-500/20 rounded text-green-400 transition-colors",title:"Call",children:"\uD83D\uDCDE"}),r.jsx("a",{href:`mailto:${l.email}`,onClick:e=>e.stopPropagation(),className:"p-1.5 hover:bg-blue-500/20 rounded text-blue-400 transition-colors",title:"Email",children:"✉️"})]})]},l._id)),(!h[e.id]||0===h[e.id].length)&&(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-32 text-white/20 text-sm",children:[(0,r.jsx)("span",{className:"text-2xl mb-1",children:e.icon}),(0,r.jsx)("span",{children:"Drop contacts here"})]})]})]},e.id))})]}),e&&(0,r.jsx)(o.A,{contactId:e,onClose:()=>s(null)})]})}function p(){return(0,r.jsx)(i.q,{children:(0,r.jsx)(d,{})})}},64330:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\swizz\\\\Desktop\\\\Emailer\\\\emailer\\\\src\\\\app\\\\pipeline\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\swizz\\Desktop\\Emailer\\emailer\\src\\app\\pipeline\\page.tsx","default")}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[989,952,987,817,300],()=>t(77963));module.exports=r})();
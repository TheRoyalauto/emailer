"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[23],{1180:(e,l,t)=>{t.d(l,{FH:()=>s});var a=t(5350);let s=a.dp;(0,a.Op)()},7916:(e,l,t)=>{t.d(l,{j:()=>m,q:()=>c});var a=t(5155),s=t(4359),r=t(7190),i=t(6046),n=t(2115),o=t(7396);function c(e){let{children:l}=e,{isAuthenticated:t,isLoading:r}=(0,s.Z)(),o=(0,i.useRouter)();return((0,n.useEffect)(()=>{r||t||o.push("/login")},[t,r,o]),r)?(0,a.jsx)("div",{className:"min-h-screen bg-[#0a0a0f] text-white flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-indigo-500 border-t-transparent rounded-full"}),(0,a.jsx)("p",{className:"text-white/50",children:"Loading..."})]})}):t?(0,a.jsx)(a.Fragment,{children:l}):null}let d=[{href:"/dashboard",label:"Dashboard",icon:"\uD83C\uDFE0",mobileIcon:"\uD83C\uDFE0"},{href:"/campaigns",label:"Campaigns",icon:"\uD83D\uDCE7",mobileIcon:"\uD83D\uDCE7"},{href:"/contacts",label:"Contacts",icon:"\uD83D\uDC65",mobileIcon:"\uD83D\uDC65"},{href:"/pipeline",label:"Pipeline",icon:"\uD83D\uDCCA",mobileIcon:"\uD83D\uDCCA"},{href:"/sequences",label:"Sequences",icon:"\uD83D\uDD04",mobileIcon:"\uD83D\uDD04"},{href:"/insights",label:"Insights",icon:"\uD83D\uDCC8",mobileIcon:"\uD83D\uDCC8"},{href:"/settings",label:"Settings",icon:"⚙️",mobileIcon:"⚙️"}],x=d.slice(0,5);function m(){let{signOut:e}=(0,r.BG)(),l=(0,i.usePathname)(),[t,s]=(0,n.useState)(!1),c=async()=>{await e()},m=e=>"/dashboard"===e?"/"===l||"/dashboard"===l:l.startsWith(e);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("header",{className:"border-b border-white/10 bg-[#0a0a0f]/95 sticky top-0 z-50 backdrop-blur-lg hidden md:block",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-3 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-8",children:[(0,a.jsx)(o.default,{href:"/dashboard",className:"text-2xl font-bold bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400 bg-clip-text text-transparent hover:opacity-80 transition-opacity",children:"Emailer"}),(0,a.jsx)("nav",{className:"flex items-center gap-1",children:d.map(e=>(0,a.jsxs)(o.default,{href:e.href,className:"px-3 py-2 rounded-lg text-sm font-medium transition-all flex items-center gap-1.5 ".concat(m(e.href)?"bg-white/10 text-white":"text-white/60 hover:text-white hover:bg-white/5"),children:[(0,a.jsx)("span",{className:"text-sm",children:e.icon}),(0,a.jsx)("span",{className:"hidden lg:inline",children:e.label})]},e.href))})]}),(0,a.jsx)("button",{onClick:c,className:"px-4 py-2 text-sm text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-colors",children:"Sign Out"})]})}),(0,a.jsxs)("header",{className:"border-b border-white/10 bg-[#0a0a0f]/95 sticky top-0 z-50 backdrop-blur-lg md:hidden",children:[(0,a.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",children:[(0,a.jsx)(o.default,{href:"/dashboard",className:"text-xl font-bold bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Emailer"}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("button",{onClick:()=>s(!t),className:"p-2 text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-colors",children:t?"✕":"☰"})})]}),t&&(0,a.jsxs)("div",{className:"absolute top-full left-0 right-0 bg-[#12121f] border-b border-white/10 p-4 space-y-2",children:[d.map(e=>(0,a.jsxs)(o.default,{href:e.href,onClick:()=>s(!1),className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ".concat(m(e.href)?"bg-indigo-500/20 text-indigo-400":"text-white/60 hover:bg-white/5 hover:text-white"),children:[(0,a.jsx)("span",{className:"text-xl",children:e.icon}),(0,a.jsx)("span",{className:"font-medium",children:e.label})]},e.href)),(0,a.jsx)("hr",{className:"border-white/10 my-3"}),(0,a.jsxs)("button",{onClick:c,className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-red-400 hover:bg-red-500/10 transition-colors",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83D\uDEAA"}),(0,a.jsx)("span",{className:"font-medium",children:"Sign Out"})]})]})]}),(0,a.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-[#0a0a0f]/98 backdrop-blur-lg border-t border-white/10 z-50 md:hidden pb-safe",children:(0,a.jsx)("div",{className:"flex items-center justify-around py-2 px-1",children:x.map(e=>(0,a.jsxs)(o.default,{href:e.href,className:"flex flex-col items-center gap-0.5 py-1.5 px-2 rounded-xl transition-all min-w-[56px] ".concat(m(e.href)?"text-indigo-400 bg-indigo-500/10":"text-white/40"),children:[(0,a.jsx)("span",{className:"text-lg",children:e.mobileIcon}),(0,a.jsx)("span",{className:"text-[10px] font-medium",children:e.label})]},e.href))})})]})}},646:(e,l,t)=>{t.d(l,{A:()=>c});var a=t(5155),s=t(2115),r=t(4359),i=t(1180);let n=[{value:"answered",label:"✅ Answered",color:"#22c55e"},{value:"voicemail",label:"\uD83D\uDCDE Voicemail",color:"#f59e0b"},{value:"no_answer",label:"❌ No Answer",color:"#ef4444"},{value:"busy",label:"\uD83D\uDD34 Busy",color:"#f97316"},{value:"wrong_number",label:"⚠️ Wrong Number",color:"#6b7280"},{value:"callback_requested",label:"\uD83D\uDD04 Callback Requested",color:"#3b82f6"}],o=[{value:"new",label:"New",color:"#6b7280"},{value:"contacted",label:"Contacted",color:"#3b82f6"},{value:"follow_up",label:"Follow Up",color:"#f59e0b"},{value:"qualified",label:"Qualified",color:"#8b5cf6"},{value:"closed_won",label:"Closed Won",color:"#22c55e"},{value:"closed_lost",label:"Closed Lost",color:"#ef4444"}];function c(e){let{contactId:l,onClose:t}=e,c=(0,r.IT)(i.FH.contacts.get,{id:l}),d=(0,r.IT)(i.FH.activities.getContactActivities,{contactId:l,limit:50}),x=(0,r.n_)(i.FH.activities.logCall),m=(0,r.n_)(i.FH.activities.addNote),h=(0,r.n_)(i.FH.activities.updateSalesStage),b=(0,r.n_)(i.FH.activities.scheduleFollowUp),[u,p]=(0,s.useState)(!1),[g,f]=(0,s.useState)("answered"),[v,w]=(0,s.useState)(""),[j,N]=(0,s.useState)(""),[y,C]=(0,s.useState)(!1),[k,S]=(0,s.useState)(!1),[D,_]=(0,s.useState)(""),[A,F]=(0,s.useState)(!1),[E,I]=(0,s.useState)(!1),[U,z]=(0,s.useState)(""),[L,O]=(0,s.useState)(""),[H,T]=(0,s.useState)(!1);if(!c)return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"bg-[#12121f] rounded-2xl p-8",children:(0,a.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-indigo-500 border-t-transparent rounded-full"})})});let q=async()=>{C(!0);try{await x({contactId:l,outcome:g,notes:v||void 0,followUpAt:j?new Date(j).getTime():void 0}),p(!1),w(""),N("")}catch(e){console.error(e)}finally{C(!1)}},M=async()=>{if(D.trim()){F(!0);try{await m({contactId:l,notes:D.trim()}),S(!1),_("")}catch(e){console.error(e)}finally{F(!1)}}},B=async()=>{if(U){T(!0);try{await b({contactId:l,followUpAt:new Date(U).getTime(),notes:L||void 0}),I(!1),z(""),O("")}catch(e){console.error(e)}finally{T(!1)}}},R=async e=>{await h({contactId:l,stage:e})},W=e=>{let l=new Date(e),t=new Date().getTime()-e;return t<6e4?"Just now":t<36e5?"".concat(Math.floor(t/6e4),"m ago"):t<864e5?"".concat(Math.floor(t/36e5),"h ago"):t<6048e5?"".concat(Math.floor(t/864e5),"d ago"):l.toLocaleDateString()},P=e=>{switch(e){case"email_sent":return"\uD83D\uDCE7";case"email_opened":return"\uD83D\uDC41️";case"email_clicked":return"\uD83D\uDD17";case"call_made":case"voicemail_left":return"\uD83D\uDCDE";case"note_added":return"\uD83D\uDCDD";case"status_changed":return"\uD83D\uDD04";case"follow_up_scheduled":return"⏰";default:return"•"}};return o.find(e=>e.value===(c.salesStage||"new"))||o[0],(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto",children:(0,a.jsxs)("div",{className:"bg-[#12121f] rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col border border-white/10",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-white/10 flex-shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-xl font-bold",children:(c.name||c.email).charAt(0).toUpperCase()}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:c.name||"Unknown"}),(0,a.jsx)("p",{className:"text-white/60",children:c.email}),c.company&&(0,a.jsx)("p",{className:"text-white/40 text-sm",children:c.company})]})]}),(0,a.jsx)("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:"✕"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mt-4",children:[c.phone&&(0,a.jsxs)("a",{href:"tel:".concat(c.phone),onClick:()=>p(!0),className:"px-4 py-2 bg-green-500/20 border border-green-500/30 rounded-lg text-green-400 hover:bg-green-500/30 transition-colors flex items-center gap-2",children:["\uD83D\uDCDE Call ",c.phone]}),(0,a.jsx)("a",{href:"mailto:".concat(c.email),className:"px-4 py-2 bg-blue-500/20 border border-blue-500/30 rounded-lg text-blue-400 hover:bg-blue-500/30 transition-colors flex items-center gap-2",children:"\uD83D\uDCE7 Email"}),(0,a.jsx)("button",{onClick:()=>S(!0),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg hover:bg-white/20 transition-colors flex items-center gap-2",children:"\uD83D\uDCDD Add Note"}),(0,a.jsx)("button",{onClick:()=>I(!0),className:"px-4 py-2 bg-amber-500/20 border border-amber-500/30 rounded-lg text-amber-400 hover:bg-amber-500/30 transition-colors flex items-center gap-2",children:"⏰ Follow-up"})]})]}),(0,a.jsxs)("div",{className:"p-4 border-b border-white/10 flex-shrink-0 bg-white/[0.02]",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:c.emailCount||0}),(0,a.jsx)("div",{className:"text-xs text-white/50",children:"Emails Sent"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:c.callCount||0}),(0,a.jsx)("div",{className:"text-xs text-white/50",children:"Calls Made"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:c.lastEmailAt?W(c.lastEmailAt):"Never"}),(0,a.jsx)("div",{className:"text-xs text-white/50",children:"Last Email"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:c.lastCallAt?W(c.lastCallAt):"Never"}),(0,a.jsx)("div",{className:"text-xs text-white/50",children:"Last Call"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("span",{className:"text-sm text-white/50",children:"Stage:"}),o.map(e=>(0,a.jsx)("button",{onClick:()=>R(e.value),className:"px-3 py-1 rounded-full text-xs font-medium transition-all ".concat(c.salesStage!==e.value&&(c.salesStage||"new"!==e.value)?"opacity-50 hover:opacity-100":"ring-2 ring-offset-2 ring-offset-[#12121f]"),style:{backgroundColor:"".concat(e.color,"20"),color:e.color},children:e.label},e.value))]}),c.nextFollowUpAt&&(0,a.jsxs)("div",{className:"mt-3 px-3 py-2 bg-amber-500/10 border border-amber-500/20 rounded-lg text-amber-400 text-sm flex items-center gap-2",children:["⏰ Follow-up scheduled: ",new Date(c.nextFollowUpAt).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-white/50 mb-4",children:"Activity Timeline"}),d&&d.length>0?(0,a.jsx)("div",{className:"space-y-3",children:d.map(e=>{var l,t;return(0,a.jsxs)("div",{className:"flex gap-3 text-sm",children:[(0,a.jsx)("div",{className:"text-lg",children:P(e.type)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("span",{className:"font-medium capitalize",children:e.type.replace(/_/g," ")}),e.callOutcome&&(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-xs",style:{backgroundColor:"".concat(null===(l=n.find(l=>l.value===e.callOutcome))||void 0===l?void 0:l.color,"20"),color:null===(t=n.find(l=>l.value===e.callOutcome))||void 0===t?void 0:t.color},children:e.callOutcome.replace(/_/g," ")}),(0,a.jsx)("span",{className:"text-white/40",children:W(e.createdAt)})]}),e.notes&&(0,a.jsx)("p",{className:"text-white/60 mt-1",children:e.notes}),e.followUpAt&&(0,a.jsxs)("p",{className:"text-amber-400 text-xs mt-1",children:["Follow-up: ",new Date(e.followUpAt).toLocaleString()]})]})]},e._id)})}):(0,a.jsxs)("div",{className:"text-center py-8 text-white/40",children:[(0,a.jsx)("p",{className:"text-4xl mb-2",children:"\uD83D\uDCCB"}),(0,a.jsx)("p",{children:"No activity yet"}),(0,a.jsx)("p",{className:"text-sm",children:"Call or email this contact to start tracking"})]})]}),u&&(0,a.jsx)("div",{className:"absolute inset-0 bg-black/90 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-[#1a1a2e] rounded-xl p-6 w-full max-w-md border border-white/10",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Log Call Outcome"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2 mb-4",children:n.map(e=>(0,a.jsx)("button",{onClick:()=>f(e.value),className:"p-3 rounded-lg text-sm font-medium transition-all ".concat(g===e.value?"ring-2 ring-offset-2 ring-offset-[#1a1a2e]":"opacity-60 hover:opacity-100"),style:{backgroundColor:"".concat(e.color,"20"),color:e.color},children:e.label},e.value))}),(0,a.jsx)("textarea",{value:v,onChange:e=>w(e.target.value),placeholder:"Call notes (optional)",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg mb-4 resize-none h-24"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"text-sm text-white/50 mb-1 block",children:"Schedule follow-up"}),(0,a.jsx)("input",{type:"datetime-local",value:j,onChange:e=>N(e.target.value),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>p(!1),className:"flex-1 px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:q,disabled:y,className:"flex-1 px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-lg font-medium disabled:opacity-50",children:y?"Saving...":"Save Call Log"})]})]})}),k&&(0,a.jsx)("div",{className:"absolute inset-0 bg-black/90 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-[#1a1a2e] rounded-xl p-6 w-full max-w-md border border-white/10",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Add Note"}),(0,a.jsx)("textarea",{value:D,onChange:e=>_(e.target.value),placeholder:"Enter your note...",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg mb-4 resize-none h-32",autoFocus:!0}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>S(!1),className:"flex-1 px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:M,disabled:A||!D.trim(),className:"flex-1 px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-lg font-medium disabled:opacity-50",children:A?"Saving...":"Save Note"})]})]})}),E&&(0,a.jsx)("div",{className:"absolute inset-0 bg-black/90 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-[#1a1a2e] rounded-xl p-6 w-full max-w-md border border-white/10",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Schedule Follow-up"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"text-sm text-white/50 mb-1 block",children:"Date & Time"}),(0,a.jsx)("input",{type:"datetime-local",value:U,onChange:e=>z(e.target.value),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg"})]}),(0,a.jsx)("textarea",{value:L,onChange:e=>O(e.target.value),placeholder:"Reminder notes (optional)",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg mb-4 resize-none h-24"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>I(!1),className:"flex-1 px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:B,disabled:H||!U,className:"flex-1 px-4 py-2 bg-gradient-to-r from-amber-500 to-orange-500 rounded-lg font-medium disabled:opacity-50",children:H?"Scheduling...":"Schedule"})]})]})})]})})}}}]);
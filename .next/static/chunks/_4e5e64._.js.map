{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/swizz/Desktop/Emailer/emailer/convex/_generated/api.js"],"sourcesContent":["/* eslint-disable */\n/**\n * Generated `api` utility.\n *\n * THIS CODE IS AUTOMATICALLY GENERATED.\n *\n * To regenerate, run `npx convex dev`.\n * @module\n */\n\nimport { anyApi, componentsGeneric } from \"convex/server\";\n\n/**\n * A utility for referencing Convex functions in your app's API.\n *\n * Usage:\n * ```js\n * const myFunctionReference = api.myModule.myFunction;\n * ```\n */\nexport const api = anyApi;\nexport const internal = anyApi;\nexport const components = componentsGeneric();\n"],"names":[],"mappings":"AAAA,kBAAkB,GAClB;;;;;;;CAOC;;;;;AAED;AAAA;AAAA;;AAUO,MAAM,MAAM,yJAAA,CAAA,SAAM;AAClB,MAAM,WAAW,yJAAA,CAAA,SAAM;AACvB,MAAM,aAAa,CAAA,GAAA,yLAAA,CAAA,oBAAiB,AAAD"}},
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/swizz/Desktop/Emailer/emailer/src/components/AuthGuard.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useConvexAuth } from \"convex/react\";\r\nimport { useAuthActions } from \"@convex-dev/auth/react\";\r\nimport { ReactNode } from \"react\";\r\nimport { useRouter, usePathname } from \"next/navigation\";\r\nimport { useEffect, useState } from \"react\";\r\nimport Link from \"next/link\";\r\n\r\ninterface AuthGuardProps {\r\n    children: ReactNode;\r\n}\r\n\r\nexport function AuthGuard({ children }: AuthGuardProps) {\r\n    const { isAuthenticated, isLoading } = useConvexAuth();\r\n    const router = useRouter();\r\n\r\n    useEffect(() => {\r\n        if (!isLoading && !isAuthenticated) {\r\n            router.push(\"/login\");\r\n        }\r\n    }, [isAuthenticated, isLoading, router]);\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"min-h-screen bg-[#0a0a0f] text-white flex items-center justify-center\">\r\n                <div className=\"flex flex-col items-center gap-4\">\r\n                    <div className=\"animate-spin w-8 h-8 border-2 border-indigo-500 border-t-transparent rounded-full\" />\r\n                    <p className=\"text-white/50\">Loading...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!isAuthenticated) {\r\n        return null;\r\n    }\r\n\r\n    return <>{children}</>;\r\n}\r\n\r\n// Navigation items - consolidated to core hubs\r\nconst NAV_ITEMS = [\r\n    { href: \"/dashboard\", label: \"Dashboard\", icon: \"üè†\", mobileIcon: \"üè†\" },\r\n    { href: \"/campaigns\", label: \"Campaigns\", icon: \"üìß\", mobileIcon: \"üìß\" },\r\n    { href: \"/contacts\", label: \"Contacts\", icon: \"üë•\", mobileIcon: \"üë•\" },\r\n    { href: \"/pipeline\", label: \"Pipeline\", icon: \"üìä\", mobileIcon: \"üìä\" },\r\n    { href: \"/sequences\", label: \"Sequences\", icon: \"üîÑ\", mobileIcon: \"üîÑ\" },\r\n    { href: \"/insights\", label: \"Insights\", icon: \"üìà\", mobileIcon: \"üìà\" },\r\n    { href: \"/settings\", label: \"Settings\", icon: \"‚öôÔ∏è\", mobileIcon: \"‚öôÔ∏è\" },\r\n];\r\n\r\n// Mobile bottom nav items (first 5)\r\nconst MOBILE_NAV_ITEMS = NAV_ITEMS.slice(0, 5);\r\n\r\n// Unified App Header\r\nexport function AppHeader() {\r\n    const { signOut } = useAuthActions();\r\n    const pathname = usePathname();\r\n    const [showMobileMenu, setShowMobileMenu] = useState(false);\r\n\r\n    const handleSignOut = async () => {\r\n        await signOut();\r\n    };\r\n\r\n    const isActive = (href: string) => {\r\n        if (href === \"/dashboard\") return pathname === \"/\" || pathname === \"/dashboard\";\r\n        return pathname.startsWith(href);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {/* Desktop Header */}\r\n            <header className=\"border-b border-white/10 bg-[#0a0a0f]/95 sticky top-0 z-50 backdrop-blur-lg hidden md:block\">\r\n                <div className=\"max-w-7xl mx-auto px-6 py-3 flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-8\">\r\n                        {/* Logo - always goes to dashboard */}\r\n                        <Link\r\n                            href=\"/dashboard\"\r\n                            className=\"text-2xl font-bold bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400 bg-clip-text text-transparent hover:opacity-80 transition-opacity\"\r\n                        >\r\n                            Emailer\r\n                        </Link>\r\n\r\n                        {/* Desktop Navigation */}\r\n                        <nav className=\"flex items-center gap-1\">\r\n                            {NAV_ITEMS.map((item) => (\r\n                                <Link\r\n                                    key={item.href}\r\n                                    href={item.href}\r\n                                    className={`px-3 py-2 rounded-lg text-sm font-medium transition-all flex items-center gap-1.5 ${isActive(item.href)\r\n                                        ? \"bg-white/10 text-white\"\r\n                                        : \"text-white/60 hover:text-white hover:bg-white/5\"\r\n                                        }`}\r\n                                >\r\n                                    <span className=\"text-sm\">{item.icon}</span>\r\n                                    <span className=\"hidden lg:inline\">{item.label}</span>\r\n                                </Link>\r\n                            ))}\r\n                        </nav>\r\n                    </div>\r\n\r\n                    <button\r\n                        onClick={handleSignOut}\r\n                        className=\"px-4 py-2 text-sm text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-colors\"\r\n                    >\r\n                        Sign Out\r\n                    </button>\r\n                </div>\r\n            </header>\r\n\r\n            {/* Mobile Header */}\r\n            <header className=\"border-b border-white/10 bg-[#0a0a0f]/95 sticky top-0 z-50 backdrop-blur-lg md:hidden\">\r\n                <div className=\"px-4 py-3 flex items-center justify-between\">\r\n                    <Link\r\n                        href=\"/dashboard\"\r\n                        className=\"text-xl font-bold bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400 bg-clip-text text-transparent\"\r\n                    >\r\n                        Emailer\r\n                    </Link>\r\n\r\n                    <div className=\"flex items-center gap-2\">\r\n                        {/* More menu button */}\r\n                        <button\r\n                            onClick={() => setShowMobileMenu(!showMobileMenu)}\r\n                            className=\"p-2 text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-colors\"\r\n                        >\r\n                            {showMobileMenu ? \"‚úï\" : \"‚ò∞\"}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Mobile dropdown menu */}\r\n                {showMobileMenu && (\r\n                    <div className=\"absolute top-full left-0 right-0 bg-[#12121f] border-b border-white/10 p-4 space-y-2\">\r\n                        {NAV_ITEMS.map((item) => (\r\n                            <Link\r\n                                key={item.href}\r\n                                href={item.href}\r\n                                onClick={() => setShowMobileMenu(false)}\r\n                                className={`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${isActive(item.href)\r\n                                    ? \"bg-indigo-500/20 text-indigo-400\"\r\n                                    : \"text-white/60 hover:bg-white/5 hover:text-white\"\r\n                                    }`}\r\n                            >\r\n                                <span className=\"text-xl\">{item.icon}</span>\r\n                                <span className=\"font-medium\">{item.label}</span>\r\n                            </Link>\r\n                        ))}\r\n                        <hr className=\"border-white/10 my-3\" />\r\n                        <button\r\n                            onClick={handleSignOut}\r\n                            className=\"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-red-400 hover:bg-red-500/10 transition-colors\"\r\n                        >\r\n                            <span className=\"text-xl\">üö™</span>\r\n                            <span className=\"font-medium\">Sign Out</span>\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </header>\r\n\r\n            {/* Mobile Bottom Navigation - Fixed 5 items */}\r\n            <nav className=\"fixed bottom-0 left-0 right-0 bg-[#0a0a0f]/98 backdrop-blur-lg border-t border-white/10 z-50 md:hidden pb-safe\">\r\n                <div className=\"flex items-center justify-around py-2 px-1\">\r\n                    {MOBILE_NAV_ITEMS.map((item) => (\r\n                        <Link\r\n                            key={item.href}\r\n                            href={item.href}\r\n                            className={`flex flex-col items-center gap-0.5 py-1.5 px-2 rounded-xl transition-all min-w-[56px] ${isActive(item.href)\r\n                                ? \"text-indigo-400 bg-indigo-500/10\"\r\n                                : \"text-white/40\"\r\n                                }`}\r\n                        >\r\n                            <span className=\"text-lg\">{item.mobileIcon}</span>\r\n                            <span className=\"text-[10px] font-medium\">{item.label}</span>\r\n                        </Link>\r\n                    ))}\r\n                </div>\r\n            </nav>\r\n        </>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 421, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 427, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/swizz/Desktop/Emailer/emailer/src/components/ContactDetail.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useMutation, useQuery } from \"convex/react\";\r\nimport { api } from \"@/../convex/_generated/api\";\r\nimport { Id } from \"@/../convex/_generated/dataModel\";\r\n\r\ninterface ContactDetailProps {\r\n    contactId: Id<\"contacts\">;\r\n    onClose: () => void;\r\n}\r\n\r\nconst CALL_OUTCOMES = [\r\n    { value: \"answered\", label: \"‚úÖ Answered\", color: \"#22c55e\" },\r\n    { value: \"voicemail\", label: \"üìû Voicemail\", color: \"#f59e0b\" },\r\n    { value: \"no_answer\", label: \"‚ùå No Answer\", color: \"#ef4444\" },\r\n    { value: \"busy\", label: \"üî¥ Busy\", color: \"#f97316\" },\r\n    { value: \"wrong_number\", label: \"‚ö†Ô∏è Wrong Number\", color: \"#6b7280\" },\r\n    { value: \"callback_requested\", label: \"üîÑ Callback Requested\", color: \"#3b82f6\" },\r\n] as const;\r\n\r\nconst SALES_STAGES = [\r\n    { value: \"new\", label: \"New\", color: \"#6b7280\" },\r\n    { value: \"contacted\", label: \"Contacted\", color: \"#3b82f6\" },\r\n    { value: \"follow_up\", label: \"Follow Up\", color: \"#f59e0b\" },\r\n    { value: \"qualified\", label: \"Qualified\", color: \"#8b5cf6\" },\r\n    { value: \"closed_won\", label: \"Closed Won\", color: \"#22c55e\" },\r\n    { value: \"closed_lost\", label: \"Closed Lost\", color: \"#ef4444\" },\r\n] as const;\r\n\r\nexport default function ContactDetail({ contactId, onClose }: ContactDetailProps) {\r\n    const contact = useQuery(api.contacts.get, { id: contactId });\r\n    const activities = useQuery(api.activities.getContactActivities, { contactId, limit: 50 });\r\n\r\n    const logCall = useMutation(api.activities.logCall);\r\n    const addNote = useMutation(api.activities.addNote);\r\n    const updateStage = useMutation(api.activities.updateSalesStage);\r\n    const scheduleFollowUp = useMutation(api.activities.scheduleFollowUp);\r\n\r\n    // UI State\r\n    const [showCallLog, setShowCallLog] = useState(false);\r\n    const [callOutcome, setCallOutcome] = useState<typeof CALL_OUTCOMES[number][\"value\"]>(\"answered\");\r\n    const [callNotes, setCallNotes] = useState(\"\");\r\n    const [callFollowUp, setCallFollowUp] = useState(\"\");\r\n    const [loggingCall, setLoggingCall] = useState(false);\r\n\r\n    const [showAddNote, setShowAddNote] = useState(false);\r\n    const [noteText, setNoteText] = useState(\"\");\r\n    const [addingNote, setAddingNote] = useState(false);\r\n\r\n    const [showFollowUp, setShowFollowUp] = useState(false);\r\n    const [followUpDate, setFollowUpDate] = useState(\"\");\r\n    const [followUpNotes, setFollowUpNotes] = useState(\"\");\r\n    const [schedulingFollowUp, setSchedulingFollowUp] = useState(false);\r\n\r\n    if (!contact) {\r\n        return (\r\n            <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center\">\r\n                <div className=\"bg-[#12121f] rounded-2xl p-8\">\r\n                    <div className=\"animate-spin w-8 h-8 border-2 border-indigo-500 border-t-transparent rounded-full\" />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const handleLogCall = async () => {\r\n        setLoggingCall(true);\r\n        try {\r\n            await logCall({\r\n                contactId,\r\n                outcome: callOutcome,\r\n                notes: callNotes || undefined,\r\n                followUpAt: callFollowUp ? new Date(callFollowUp).getTime() : undefined,\r\n            });\r\n            setShowCallLog(false);\r\n            setCallNotes(\"\");\r\n            setCallFollowUp(\"\");\r\n        } catch (err) {\r\n            console.error(err);\r\n        } finally {\r\n            setLoggingCall(false);\r\n        }\r\n    };\r\n\r\n    const handleAddNote = async () => {\r\n        if (!noteText.trim()) return;\r\n        setAddingNote(true);\r\n        try {\r\n            await addNote({ contactId, notes: noteText.trim() });\r\n            setShowAddNote(false);\r\n            setNoteText(\"\");\r\n        } catch (err) {\r\n            console.error(err);\r\n        } finally {\r\n            setAddingNote(false);\r\n        }\r\n    };\r\n\r\n    const handleScheduleFollowUp = async () => {\r\n        if (!followUpDate) return;\r\n        setSchedulingFollowUp(true);\r\n        try {\r\n            await scheduleFollowUp({\r\n                contactId,\r\n                followUpAt: new Date(followUpDate).getTime(),\r\n                notes: followUpNotes || undefined,\r\n            });\r\n            setShowFollowUp(false);\r\n            setFollowUpDate(\"\");\r\n            setFollowUpNotes(\"\");\r\n        } catch (err) {\r\n            console.error(err);\r\n        } finally {\r\n            setSchedulingFollowUp(false);\r\n        }\r\n    };\r\n\r\n    const handleStageChange = async (stage: typeof SALES_STAGES[number][\"value\"]) => {\r\n        await updateStage({ contactId, stage });\r\n    };\r\n\r\n    const formatDate = (timestamp: number) => {\r\n        const date = new Date(timestamp);\r\n        const now = new Date();\r\n        const diff = now.getTime() - timestamp;\r\n\r\n        if (diff < 60000) return \"Just now\";\r\n        if (diff < 3600000) return `${Math.floor(diff / 60000)}m ago`;\r\n        if (diff < 86400000) return `${Math.floor(diff / 3600000)}h ago`;\r\n        if (diff < 604800000) return `${Math.floor(diff / 86400000)}d ago`;\r\n        return date.toLocaleDateString();\r\n    };\r\n\r\n    const getActivityIcon = (type: string) => {\r\n        switch (type) {\r\n            case \"email_sent\": return \"üìß\";\r\n            case \"email_opened\": return \"üëÅÔ∏è\";\r\n            case \"email_clicked\": return \"üîó\";\r\n            case \"call_made\": return \"üìû\";\r\n            case \"voicemail_left\": return \"üìû\";\r\n            case \"note_added\": return \"üìù\";\r\n            case \"status_changed\": return \"üîÑ\";\r\n            case \"follow_up_scheduled\": return \"‚è∞\";\r\n            default: return \"‚Ä¢\";\r\n        }\r\n    };\r\n\r\n    const currentStage = SALES_STAGES.find(s => s.value === (contact.salesStage || \"new\")) || SALES_STAGES[0];\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto\">\r\n            <div className=\"bg-[#12121f] rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col border border-white/10\">\r\n                {/* Header */}\r\n                <div className=\"p-6 border-b border-white/10 flex-shrink-0\">\r\n                    <div className=\"flex items-start justify-between\">\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <div className=\"w-14 h-14 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-xl font-bold\">\r\n                                {(contact.name || contact.email).charAt(0).toUpperCase()}\r\n                            </div>\r\n                            <div>\r\n                                <h2 className=\"text-xl font-bold\">{contact.name || \"Unknown\"}</h2>\r\n                                <p className=\"text-white/60\">{contact.email}</p>\r\n                                {contact.company && <p className=\"text-white/40 text-sm\">{contact.company}</p>}\r\n                            </div>\r\n                        </div>\r\n                        <button onClick={onClose} className=\"p-2 hover:bg-white/10 rounded-lg transition-colors\">\r\n                            ‚úï\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Quick Actions */}\r\n                    <div className=\"flex flex-wrap gap-2 mt-4\">\r\n                        {/* Click to Call */}\r\n                        {contact.phone && (\r\n                            <a\r\n                                href={`tel:${contact.phone}`}\r\n                                onClick={() => setShowCallLog(true)}\r\n                                className=\"px-4 py-2 bg-green-500/20 border border-green-500/30 rounded-lg text-green-400 hover:bg-green-500/30 transition-colors flex items-center gap-2\"\r\n                            >\r\n                                üìû Call {contact.phone}\r\n                            </a>\r\n                        )}\r\n                        {/* Click to Email */}\r\n                        <a\r\n                            href={`mailto:${contact.email}`}\r\n                            className=\"px-4 py-2 bg-blue-500/20 border border-blue-500/30 rounded-lg text-blue-400 hover:bg-blue-500/30 transition-colors flex items-center gap-2\"\r\n                        >\r\n                            üìß Email\r\n                        </a>\r\n                        {/* Add Note */}\r\n                        <button\r\n                            onClick={() => setShowAddNote(true)}\r\n                            className=\"px-4 py-2 bg-white/10 border border-white/20 rounded-lg hover:bg-white/20 transition-colors flex items-center gap-2\"\r\n                        >\r\n                            üìù Add Note\r\n                        </button>\r\n                        {/* Schedule Follow-up */}\r\n                        <button\r\n                            onClick={() => setShowFollowUp(true)}\r\n                            className=\"px-4 py-2 bg-amber-500/20 border border-amber-500/30 rounded-lg text-amber-400 hover:bg-amber-500/30 transition-colors flex items-center gap-2\"\r\n                        >\r\n                            ‚è∞ Follow-up\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Stats & Stage */}\r\n                <div className=\"p-4 border-b border-white/10 flex-shrink-0 bg-white/[0.02]\">\r\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4\">\r\n                        <div className=\"text-center\">\r\n                            <div className=\"text-2xl font-bold\">{contact.emailCount || 0}</div>\r\n                            <div className=\"text-xs text-white/50\">Emails Sent</div>\r\n                        </div>\r\n                        <div className=\"text-center\">\r\n                            <div className=\"text-2xl font-bold\">{contact.callCount || 0}</div>\r\n                            <div className=\"text-xs text-white/50\">Calls Made</div>\r\n                        </div>\r\n                        <div className=\"text-center\">\r\n                            <div className=\"text-sm font-medium\">{contact.lastEmailAt ? formatDate(contact.lastEmailAt) : \"Never\"}</div>\r\n                            <div className=\"text-xs text-white/50\">Last Email</div>\r\n                        </div>\r\n                        <div className=\"text-center\">\r\n                            <div className=\"text-sm font-medium\">{contact.lastCallAt ? formatDate(contact.lastCallAt) : \"Never\"}</div>\r\n                            <div className=\"text-xs text-white/50\">Last Call</div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Sales Stage */}\r\n                    <div className=\"flex items-center gap-2 flex-wrap\">\r\n                        <span className=\"text-sm text-white/50\">Stage:</span>\r\n                        {SALES_STAGES.map((stage) => (\r\n                            <button\r\n                                key={stage.value}\r\n                                onClick={() => handleStageChange(stage.value)}\r\n                                className={`px-3 py-1 rounded-full text-xs font-medium transition-all ${contact.salesStage === stage.value || (!contact.salesStage && stage.value === \"new\")\r\n                                    ? \"ring-2 ring-offset-2 ring-offset-[#12121f]\"\r\n                                    : \"opacity-50 hover:opacity-100\"\r\n                                    }`}\r\n                                style={{\r\n                                    backgroundColor: `${stage.color}20`,\r\n                                    color: stage.color,\r\n                                }}\r\n                            >\r\n                                {stage.label}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Next Follow-up Warning */}\r\n                    {contact.nextFollowUpAt && (\r\n                        <div className=\"mt-3 px-3 py-2 bg-amber-500/10 border border-amber-500/20 rounded-lg text-amber-400 text-sm flex items-center gap-2\">\r\n                            ‚è∞ Follow-up scheduled: {new Date(contact.nextFollowUpAt).toLocaleString()}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Activity Timeline */}\r\n                <div className=\"flex-1 overflow-y-auto p-4\">\r\n                    <h3 className=\"text-sm font-medium text-white/50 mb-4\">Activity Timeline</h3>\r\n\r\n                    {activities && activities.length > 0 ? (\r\n                        <div className=\"space-y-3\">\r\n                            {activities.map((activity) => (\r\n                                <div key={activity._id} className=\"flex gap-3 text-sm\">\r\n                                    <div className=\"text-lg\">{getActivityIcon(activity.type)}</div>\r\n                                    <div className=\"flex-1 min-w-0\">\r\n                                        <div className=\"flex items-center gap-2 flex-wrap\">\r\n                                            <span className=\"font-medium capitalize\">\r\n                                                {activity.type.replace(/_/g, \" \")}\r\n                                            </span>\r\n                                            {activity.callOutcome && (\r\n                                                <span\r\n                                                    className=\"px-2 py-0.5 rounded text-xs\"\r\n                                                    style={{\r\n                                                        backgroundColor: `${CALL_OUTCOMES.find(o => o.value === activity.callOutcome)?.color}20`,\r\n                                                        color: CALL_OUTCOMES.find(o => o.value === activity.callOutcome)?.color,\r\n                                                    }}\r\n                                                >\r\n                                                    {activity.callOutcome.replace(/_/g, \" \")}\r\n                                                </span>\r\n                                            )}\r\n                                            <span className=\"text-white/40\">{formatDate(activity.createdAt)}</span>\r\n                                        </div>\r\n                                        {activity.notes && (\r\n                                            <p className=\"text-white/60 mt-1\">{activity.notes}</p>\r\n                                        )}\r\n                                        {activity.followUpAt && (\r\n                                            <p className=\"text-amber-400 text-xs mt-1\">\r\n                                                Follow-up: {new Date(activity.followUpAt).toLocaleString()}\r\n                                            </p>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"text-center py-8 text-white/40\">\r\n                            <p className=\"text-4xl mb-2\">üìã</p>\r\n                            <p>No activity yet</p>\r\n                            <p className=\"text-sm\">Call or email this contact to start tracking</p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Call Log Modal */}\r\n                {showCallLog && (\r\n                    <div className=\"absolute inset-0 bg-black/90 flex items-center justify-center p-4\">\r\n                        <div className=\"bg-[#1a1a2e] rounded-xl p-6 w-full max-w-md border border-white/10\">\r\n                            <h3 className=\"text-lg font-bold mb-4\">Log Call Outcome</h3>\r\n\r\n                            <div className=\"grid grid-cols-2 gap-2 mb-4\">\r\n                                {CALL_OUTCOMES.map((outcome) => (\r\n                                    <button\r\n                                        key={outcome.value}\r\n                                        onClick={() => setCallOutcome(outcome.value)}\r\n                                        className={`p-3 rounded-lg text-sm font-medium transition-all ${callOutcome === outcome.value\r\n                                            ? \"ring-2 ring-offset-2 ring-offset-[#1a1a2e]\"\r\n                                            : \"opacity-60 hover:opacity-100\"\r\n                                            }`}\r\n                                        style={{\r\n                                            backgroundColor: `${outcome.color}20`,\r\n                                            color: outcome.color,\r\n                                        }}\r\n                                    >\r\n                                        {outcome.label}\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n\r\n                            <textarea\r\n                                value={callNotes}\r\n                                onChange={(e) => setCallNotes(e.target.value)}\r\n                                placeholder=\"Call notes (optional)\"\r\n                                className=\"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg mb-4 resize-none h-24\"\r\n                            />\r\n\r\n                            <div className=\"mb-4\">\r\n                                <label className=\"text-sm text-white/50 mb-1 block\">Schedule follow-up</label>\r\n                                <input\r\n                                    type=\"datetime-local\"\r\n                                    value={callFollowUp}\r\n                                    onChange={(e) => setCallFollowUp(e.target.value)}\r\n                                    className=\"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"flex gap-3\">\r\n                                <button\r\n                                    onClick={() => setShowCallLog(false)}\r\n                                    className=\"flex-1 px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button\r\n                                    onClick={handleLogCall}\r\n                                    disabled={loggingCall}\r\n                                    className=\"flex-1 px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-lg font-medium disabled:opacity-50\"\r\n                                >\r\n                                    {loggingCall ? \"Saving...\" : \"Save Call Log\"}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Add Note Modal */}\r\n                {showAddNote && (\r\n                    <div className=\"absolute inset-0 bg-black/90 flex items-center justify-center p-4\">\r\n                        <div className=\"bg-[#1a1a2e] rounded-xl p-6 w-full max-w-md border border-white/10\">\r\n                            <h3 className=\"text-lg font-bold mb-4\">Add Note</h3>\r\n\r\n                            <textarea\r\n                                value={noteText}\r\n                                onChange={(e) => setNoteText(e.target.value)}\r\n                                placeholder=\"Enter your note...\"\r\n                                className=\"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg mb-4 resize-none h-32\"\r\n                                autoFocus\r\n                            />\r\n\r\n                            <div className=\"flex gap-3\">\r\n                                <button\r\n                                    onClick={() => setShowAddNote(false)}\r\n                                    className=\"flex-1 px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button\r\n                                    onClick={handleAddNote}\r\n                                    disabled={addingNote || !noteText.trim()}\r\n                                    className=\"flex-1 px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-lg font-medium disabled:opacity-50\"\r\n                                >\r\n                                    {addingNote ? \"Saving...\" : \"Save Note\"}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Schedule Follow-up Modal */}\r\n                {showFollowUp && (\r\n                    <div className=\"absolute inset-0 bg-black/90 flex items-center justify-center p-4\">\r\n                        <div className=\"bg-[#1a1a2e] rounded-xl p-6 w-full max-w-md border border-white/10\">\r\n                            <h3 className=\"text-lg font-bold mb-4\">Schedule Follow-up</h3>\r\n\r\n                            <div className=\"mb-4\">\r\n                                <label className=\"text-sm text-white/50 mb-1 block\">Date & Time</label>\r\n                                <input\r\n                                    type=\"datetime-local\"\r\n                                    value={followUpDate}\r\n                                    onChange={(e) => setFollowUpDate(e.target.value)}\r\n                                    className=\"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg\"\r\n                                />\r\n                            </div>\r\n\r\n                            <textarea\r\n                                value={followUpNotes}\r\n                                onChange={(e) => setFollowUpNotes(e.target.value)}\r\n                                placeholder=\"Reminder notes (optional)\"\r\n                                className=\"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg mb-4 resize-none h-24\"\r\n                            />\r\n\r\n                            <div className=\"flex gap-3\">\r\n                                <button\r\n                                    onClick={() => setShowFollowUp(false)}\r\n                                    className=\"flex-1 px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button\r\n                                    onClick={handleScheduleFollowUp}\r\n                                    disabled={schedulingFollowUp || !followUpDate}\r\n                                    className=\"flex-1 px-4 py-2 bg-gradient-to-r from-amber-500 to-orange-500 rounded-lg font-medium disabled:opacity-50\"\r\n                                >\r\n                                    {schedulingFollowUp ? \"Scheduling...\" : \"Schedule\"}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AADA;;;AAHA;;;;AAYA,MAAM,gBAAgB;IAClB;QAAE,OAAO;QAAY,OAAO;QAAc,OAAO;IAAU;IAC3D;QAAE,OAAO;QAAa,OAAO;QAAgB,OAAO;IAAU;IAC9D;QAAE,OAAO;QAAa,OAAO;QAAe,OAAO;IAAU;IAC7D;QAAE,OAAO;QAAQ,OAAO;QAAW,OAAO;IAAU;IACpD;QAAE,OAAO;QAAgB,OAAO;QAAmB,OAAO;IAAU;IACpE;QAAE,OAAO;QAAsB,OAAO;QAAyB,OAAO;IAAU;CACnF;AAED,MAAM,eAAe;IACjB;QAAE,OAAO;QAAO,OAAO;QAAO,OAAO;IAAU;IAC/C;QAAE,OAAO;QAAa,OAAO;QAAa,OAAO;IAAU;IAC3D;QAAE,OAAO;QAAa,OAAO;QAAa,OAAO;IAAU;IAC3D;QAAE,OAAO;QAAa,OAAO;QAAa,OAAO;IAAU;IAC3D;QAAE,OAAO;QAAc,OAAO;QAAc,OAAO;IAAU;IAC7D;QAAE,OAAO;QAAe,OAAO;QAAe,OAAO;IAAU;CAClE;AAEc,SAAS,cAAc,EAAE,SAAS,EAAE,OAAO,EAAsB;;IAC5E,MAAM,UAAU,CAAA,GAAA,2JAAA,CAAA,WAAQ,AAAD,EAAE,8HAAA,CAAA,MAAG,CAAC,QAAQ,CAAC,GAAG,EAAE;QAAE,IAAI;IAAU;IAC3D,MAAM,aAAa,CAAA,GAAA,2JAAA,CAAA,WAAQ,AAAD,EAAE,8HAAA,CAAA,MAAG,CAAC,UAAU,CAAC,oBAAoB,EAAE;QAAE;QAAW,OAAO;IAAG;IAExF,MAAM,UAAU,CAAA,GAAA,2JAAA,CAAA,cAAW,AAAD,EAAE,8HAAA,CAAA,MAAG,CAAC,UAAU,CAAC,OAAO;IAClD,MAAM,UAAU,CAAA,GAAA,2JAAA,CAAA,cAAW,AAAD,EAAE,8HAAA,CAAA,MAAG,CAAC,UAAU,CAAC,OAAO;IAClD,MAAM,cAAc,CAAA,GAAA,2JAAA,CAAA,cAAW,AAAD,EAAE,8HAAA,CAAA,MAAG,CAAC,UAAU,CAAC,gBAAgB;IAC/D,MAAM,mBAAmB,CAAA,GAAA,2JAAA,CAAA,cAAW,AAAD,EAAE,8HAAA,CAAA,MAAG,CAAC,UAAU,CAAC,gBAAgB;IAEpE,WAAW;IACX,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAyC;IACtF,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE/C,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnD,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE7D,IAAI,CAAC,SAAS;QACV,qBACI,6LAAC;YAAI,WAAU;sBACX,cAAA,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAI,WAAU;;;;;;;;;;;;;;;;IAI/B;IAEA,MAAM,gBAAgB;QAClB,eAAe;QACf,IAAI;YACA,MAAM,QAAQ;gBACV;gBACA,SAAS;gBACT,OAAO,aAAa;gBACpB,YAAY,eAAe,IAAI,KAAK,cAAc,OAAO,KAAK;YAClE;YACA,eAAe;YACf,aAAa;YACb,gBAAgB;QACpB,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC;QAClB,SAAU;YACN,eAAe;QACnB;IACJ;IAEA,MAAM,gBAAgB;QAClB,IAAI,CAAC,SAAS,IAAI,IAAI;QACtB,cAAc;QACd,IAAI;YACA,MAAM,QAAQ;gBAAE;gBAAW,OAAO,SAAS,IAAI;YAAG;YAClD,eAAe;YACf,YAAY;QAChB,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC;QAClB,SAAU;YACN,cAAc;QAClB;IACJ;IAEA,MAAM,yBAAyB;QAC3B,IAAI,CAAC,cAAc;QACnB,sBAAsB;QACtB,IAAI;YACA,MAAM,iBAAiB;gBACnB;gBACA,YAAY,IAAI,KAAK,cAAc,OAAO;gBAC1C,OAAO,iBAAiB;YAC5B;YACA,gBAAgB;YAChB,gBAAgB;YAChB,iBAAiB;QACrB,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC;QAClB,SAAU;YACN,sBAAsB;QAC1B;IACJ;IAEA,MAAM,oBAAoB,OAAO;QAC7B,MAAM,YAAY;YAAE;YAAW;QAAM;IACzC;IAEA,MAAM,aAAa,CAAC;QAChB,MAAM,OAAO,IAAI,KAAK;QACtB,MAAM,MAAM,IAAI;QAChB,MAAM,OAAO,IAAI,OAAO,KAAK;QAE7B,IAAI,OAAO,OAAO,OAAO;QACzB,IAAI,OAAO,SAAS,OAAO,GAAG,KAAK,KAAK,CAAC,OAAO,OAAO,KAAK,CAAC;QAC7D,IAAI,OAAO,UAAU,OAAO,GAAG,KAAK,KAAK,CAAC,OAAO,SAAS,KAAK,CAAC;QAChE,IAAI,OAAO,WAAW,OAAO,GAAG,KAAK,KAAK,CAAC,OAAO,UAAU,KAAK,CAAC;QAClE,OAAO,KAAK,kBAAkB;IAClC;IAEA,MAAM,kBAAkB,CAAC;QACrB,OAAQ;YACJ,KAAK;gBAAc,OAAO;YAC1B,KAAK;gBAAgB,OAAO;YAC5B,KAAK;gBAAiB,OAAO;YAC7B,KAAK;gBAAa,OAAO;YACzB,KAAK;gBAAkB,OAAO;YAC9B,KAAK;gBAAc,OAAO;YAC1B,KAAK;gBAAkB,OAAO;YAC9B,KAAK;gBAAuB,OAAO;YACnC;gBAAS,OAAO;QACpB;IACJ;IAEA,MAAM,eAAe,aAAa,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK,CAAC,QAAQ,UAAU,IAAI,KAAK,MAAM,YAAY,CAAC,EAAE;IAEzG,qBACI,6LAAC;QAAI,WAAU;kBACX,cAAA,6LAAC;YAAI,WAAU;;8BAEX,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAU;sDACV,CAAC,QAAQ,IAAI,IAAI,QAAQ,KAAK,EAAE,MAAM,CAAC,GAAG,WAAW;;;;;;sDAE1D,6LAAC;;8DACG,6LAAC;oDAAG,WAAU;8DAAqB,QAAQ,IAAI,IAAI;;;;;;8DACnD,6LAAC;oDAAE,WAAU;8DAAiB,QAAQ,KAAK;;;;;;gDAC1C,QAAQ,OAAO,kBAAI,6LAAC;oDAAE,WAAU;8DAAyB,QAAQ,OAAO;;;;;;;;;;;;;;;;;;8CAGjF,6LAAC;oCAAO,SAAS;oCAAS,WAAU;8CAAqD;;;;;;;;;;;;sCAM7F,6LAAC;4BAAI,WAAU;;gCAEV,QAAQ,KAAK,kBACV,6LAAC;oCACG,MAAM,CAAC,IAAI,EAAE,QAAQ,KAAK,EAAE;oCAC5B,SAAS,IAAM,eAAe;oCAC9B,WAAU;;wCACb;wCACY,QAAQ,KAAK;;;;;;;8CAI9B,6LAAC;oCACG,MAAM,CAAC,OAAO,EAAE,QAAQ,KAAK,EAAE;oCAC/B,WAAU;8CACb;;;;;;8CAID,6LAAC;oCACG,SAAS,IAAM,eAAe;oCAC9B,WAAU;8CACb;;;;;;8CAID,6LAAC;oCACG,SAAS,IAAM,gBAAgB;oCAC/B,WAAU;8CACb;;;;;;;;;;;;;;;;;;8BAOT,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAU;sDAAsB,QAAQ,UAAU,IAAI;;;;;;sDAC3D,6LAAC;4CAAI,WAAU;sDAAwB;;;;;;;;;;;;8CAE3C,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAU;sDAAsB,QAAQ,SAAS,IAAI;;;;;;sDAC1D,6LAAC;4CAAI,WAAU;sDAAwB;;;;;;;;;;;;8CAE3C,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAU;sDAAuB,QAAQ,WAAW,GAAG,WAAW,QAAQ,WAAW,IAAI;;;;;;sDAC9F,6LAAC;4CAAI,WAAU;sDAAwB;;;;;;;;;;;;8CAE3C,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAU;sDAAuB,QAAQ,UAAU,GAAG,WAAW,QAAQ,UAAU,IAAI;;;;;;sDAC5F,6LAAC;4CAAI,WAAU;sDAAwB;;;;;;;;;;;;;;;;;;sCAK/C,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAK,WAAU;8CAAwB;;;;;;gCACvC,aAAa,GAAG,CAAC,CAAC,sBACf,6LAAC;wCAEG,SAAS,IAAM,kBAAkB,MAAM,KAAK;wCAC5C,WAAW,CAAC,0DAA0D,EAAE,QAAQ,UAAU,KAAK,MAAM,KAAK,IAAK,CAAC,QAAQ,UAAU,IAAI,MAAM,KAAK,KAAK,QAChJ,+CACA,gCACA;wCACN,OAAO;4CACH,iBAAiB,GAAG,MAAM,KAAK,CAAC,EAAE,CAAC;4CACnC,OAAO,MAAM,KAAK;wCACtB;kDAEC,MAAM,KAAK;uCAXP,MAAM,KAAK;;;;;;;;;;;wBAiB3B,QAAQ,cAAc,kBACnB,6LAAC;4BAAI,WAAU;;gCAAsH;gCACzG,IAAI,KAAK,QAAQ,cAAc,EAAE,cAAc;;;;;;;;;;;;;8BAMnF,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAG,WAAU;sCAAyC;;;;;;wBAEtD,cAAc,WAAW,MAAM,GAAG,kBAC/B,6LAAC;4BAAI,WAAU;sCACV,WAAW,GAAG,CAAC,CAAC,yBACb,6LAAC;oCAAuB,WAAU;;sDAC9B,6LAAC;4CAAI,WAAU;sDAAW,gBAAgB,SAAS,IAAI;;;;;;sDACvD,6LAAC;4CAAI,WAAU;;8DACX,6LAAC;oDAAI,WAAU;;sEACX,6LAAC;4DAAK,WAAU;sEACX,SAAS,IAAI,CAAC,OAAO,CAAC,MAAM;;;;;;wDAEhC,SAAS,WAAW,kBACjB,6LAAC;4DACG,WAAU;4DACV,OAAO;gEACH,iBAAiB,GAAG,cAAc,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK,SAAS,WAAW,GAAG,MAAM,EAAE,CAAC;gEACxF,OAAO,cAAc,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK,SAAS,WAAW,GAAG;4DACtE;sEAEC,SAAS,WAAW,CAAC,OAAO,CAAC,MAAM;;;;;;sEAG5C,6LAAC;4DAAK,WAAU;sEAAiB,WAAW,SAAS,SAAS;;;;;;;;;;;;gDAEjE,SAAS,KAAK,kBACX,6LAAC;oDAAE,WAAU;8DAAsB,SAAS,KAAK;;;;;;gDAEpD,SAAS,UAAU,kBAChB,6LAAC;oDAAE,WAAU;;wDAA8B;wDAC3B,IAAI,KAAK,SAAS,UAAU,EAAE,cAAc;;;;;;;;;;;;;;mCAzB9D,SAAS,GAAG;;;;;;;;;iDAiC9B,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAE,WAAU;8CAAgB;;;;;;8CAC7B,6LAAC;8CAAE;;;;;;8CACH,6LAAC;oCAAE,WAAU;8CAAU;;;;;;;;;;;;;;;;;;gBAMlC,6BACG,6LAAC;oBAAI,WAAU;8BACX,cAAA,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAG,WAAU;0CAAyB;;;;;;0CAEvC,6LAAC;gCAAI,WAAU;0CACV,cAAc,GAAG,CAAC,CAAC,wBAChB,6LAAC;wCAEG,SAAS,IAAM,eAAe,QAAQ,KAAK;wCAC3C,WAAW,CAAC,kDAAkD,EAAE,gBAAgB,QAAQ,KAAK,GACvF,+CACA,gCACA;wCACN,OAAO;4CACH,iBAAiB,GAAG,QAAQ,KAAK,CAAC,EAAE,CAAC;4CACrC,OAAO,QAAQ,KAAK;wCACxB;kDAEC,QAAQ,KAAK;uCAXT,QAAQ,KAAK;;;;;;;;;;0CAgB9B,6LAAC;gCACG,OAAO;gCACP,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK;gCAC5C,aAAY;gCACZ,WAAU;;;;;;0CAGd,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAM,WAAU;kDAAmC;;;;;;kDACpD,6LAAC;wCACG,MAAK;wCACL,OAAO;wCACP,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK;wCAC/C,WAAU;;;;;;;;;;;;0CAIlB,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCACG,SAAS,IAAM,eAAe;wCAC9B,WAAU;kDACb;;;;;;kDAGD,6LAAC;wCACG,SAAS;wCACT,UAAU;wCACV,WAAU;kDAET,cAAc,cAAc;;;;;;;;;;;;;;;;;;;;;;;gBAQhD,6BACG,6LAAC;oBAAI,WAAU;8BACX,cAAA,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAG,WAAU;0CAAyB;;;;;;0CAEvC,6LAAC;gCACG,OAAO;gCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;gCAC3C,aAAY;gCACZ,WAAU;gCACV,SAAS;;;;;;0CAGb,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCACG,SAAS,IAAM,eAAe;wCAC9B,WAAU;kDACb;;;;;;kDAGD,6LAAC;wCACG,SAAS;wCACT,UAAU,cAAc,CAAC,SAAS,IAAI;wCACtC,WAAU;kDAET,aAAa,cAAc;;;;;;;;;;;;;;;;;;;;;;;gBAQ/C,8BACG,6LAAC;oBAAI,WAAU;8BACX,cAAA,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAG,WAAU;0CAAyB;;;;;;0CAEvC,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAM,WAAU;kDAAmC;;;;;;kDACpD,6LAAC;wCACG,MAAK;wCACL,OAAO;wCACP,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK;wCAC/C,WAAU;;;;;;;;;;;;0CAIlB,6LAAC;gCACG,OAAO;gCACP,UAAU,CAAC,IAAM,iBAAiB,EAAE,MAAM,CAAC,KAAK;gCAChD,aAAY;gCACZ,WAAU;;;;;;0CAGd,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCACG,SAAS,IAAM,gBAAgB;wCAC/B,WAAU;kDACb;;;;;;kDAGD,6LAAC;wCACG,SAAS;wCACT,UAAU,sBAAsB,CAAC;wCACjC,WAAU;kDAET,qBAAqB,kBAAkB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAS5E;GA5ZwB;;QACJ,2JAAA,CAAA,WAAQ;QACL,2JAAA,CAAA,WAAQ;QAEX,2JAAA,CAAA,cAAW;QACX,2JAAA,CAAA,cAAW;QACP,2JAAA,CAAA,cAAW;QACN,2JAAA,CAAA,cAAW;;;KAPhB"}},
    {"offset": {"line": 1360, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1366, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/swizz/Desktop/Emailer/emailer/src/app/calls/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useQuery, useMutation } from \"convex/react\";\r\nimport { api } from \"@/../convex/_generated/api\";\r\nimport { Id } from \"@/../convex/_generated/dataModel\";\r\nimport { AuthGuard, AppHeader } from \"@/components/AuthGuard\";\r\nimport ContactDetail from \"@/components/ContactDetail\";\r\n\r\nconst CALL_OUTCOMES = [\r\n    { value: \"answered\", label: \"‚úÖ Answered\", color: \"#22c55e\" },\r\n    { value: \"voicemail\", label: \"üìû Voicemail\", color: \"#f59e0b\" },\r\n    { value: \"no_answer\", label: \"‚ùå No Answer\", color: \"#ef4444\" },\r\n    { value: \"busy\", label: \"üî¥ Busy\", color: \"#f97316\" },\r\n    { value: \"wrong_number\", label: \"‚ö†Ô∏è Wrong Number\", color: \"#6b7280\" },\r\n    { value: \"callback_requested\", label: \"üîÑ Callback\", color: \"#3b82f6\" },\r\n] as const;\r\n\r\nfunction CallsPage() {\r\n    const [viewContactId, setViewContactId] = useState<Id<\"contacts\"> | null>(null);\r\n    const [activeTab, setActiveTab] = useState<\"today\" | \"all\" | \"followups\">(\"today\");\r\n    const [showLogCall, setShowLogCall] = useState<Id<\"contacts\"> | null>(null);\r\n    const [callOutcome, setCallOutcome] = useState<typeof CALL_OUTCOMES[number][\"value\"]>(\"answered\");\r\n    const [callNotes, setCallNotes] = useState(\"\");\r\n    const [callFollowUp, setCallFollowUp] = useState(\"\");\r\n    const [loggingCall, setLoggingCall] = useState(false);\r\n\r\n    // Queries\r\n    const callStats = useQuery(api.activities.getCallStats);\r\n    const todayFollowUps = useQuery(api.activities.getTodayFollowUps);\r\n    const recentActivity = useQuery(api.activities.getRecentActivity, { limit: 30 });\r\n    const allContacts = useQuery(api.contacts.list, {});\r\n\r\n    // Mutations\r\n    const logCall = useMutation(api.activities.logCall);\r\n\r\n    // Filter contacts with phones for call queue\r\n    const callableContacts = allContacts?.filter(c => c.phone && c.status === \"active\") || [];\r\n\r\n    // Sort by: follow-up due first, then by last called (oldest first)\r\n    const sortedCallQueue = [...callableContacts].sort((a, b) => {\r\n        // Follow-ups due today first\r\n        const aDue = a.nextFollowUpAt && a.nextFollowUpAt <= Date.now();\r\n        const bDue = b.nextFollowUpAt && b.nextFollowUpAt <= Date.now();\r\n        if (aDue && !bDue) return -1;\r\n        if (!aDue && bDue) return 1;\r\n\r\n        // Then sort by last called (oldest first, never called at top)\r\n        const aLast = a.lastCallAt || 0;\r\n        const bLast = b.lastCallAt || 0;\r\n        return aLast - bLast;\r\n    });\r\n\r\n    const handleLogCall = async () => {\r\n        if (!showLogCall) return;\r\n        setLoggingCall(true);\r\n        try {\r\n            await logCall({\r\n                contactId: showLogCall,\r\n                outcome: callOutcome,\r\n                notes: callNotes || undefined,\r\n                followUpAt: callFollowUp ? new Date(callFollowUp).getTime() : undefined,\r\n            });\r\n            setShowLogCall(null);\r\n            setCallNotes(\"\");\r\n            setCallFollowUp(\"\");\r\n            setCallOutcome(\"answered\");\r\n        } catch (err) {\r\n            console.error(err);\r\n        } finally {\r\n            setLoggingCall(false);\r\n        }\r\n    };\r\n\r\n    const formatDate = (timestamp: number) => {\r\n        const date = new Date(timestamp);\r\n        const now = new Date();\r\n        const diff = now.getTime() - timestamp;\r\n\r\n        if (diff < 60000) return \"Just now\";\r\n        if (diff < 3600000) return `${Math.floor(diff / 60000)}m ago`;\r\n        if (diff < 86400000) return `${Math.floor(diff / 3600000)}h ago`;\r\n        if (diff < 604800000) return `${Math.floor(diff / 86400000)}d ago`;\r\n        return date.toLocaleDateString();\r\n    };\r\n\r\n    const getActivityIcon = (type: string) => {\r\n        switch (type) {\r\n            case \"email_sent\": return \"üìß\";\r\n            case \"email_opened\": return \"üëÅÔ∏è\";\r\n            case \"call_made\": return \"üìû\";\r\n            case \"voicemail_left\": return \"üìû\";\r\n            case \"note_added\": return \"üìù\";\r\n            case \"status_changed\": return \"üîÑ\";\r\n            case \"follow_up_scheduled\": return \"‚è∞\";\r\n            default: return \"‚Ä¢\";\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[#0a0a0f]\">\r\n            <AppHeader />\r\n\r\n            <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n                {/* Stats Cards */}\r\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8\">\r\n                    <div className=\"bg-gradient-to-br from-green-500/20 to-green-600/10 border border-green-500/20 rounded-xl p-4\">\r\n                        <div className=\"text-3xl font-bold text-green-400\">{callStats?.today || 0}</div>\r\n                        <div className=\"text-sm text-white/50\">Calls Today</div>\r\n                    </div>\r\n                    <div className=\"bg-gradient-to-br from-blue-500/20 to-blue-600/10 border border-blue-500/20 rounded-xl p-4\">\r\n                        <div className=\"text-3xl font-bold text-blue-400\">{callStats?.week || 0}</div>\r\n                        <div className=\"text-sm text-white/50\">This Week</div>\r\n                    </div>\r\n                    <div className=\"bg-gradient-to-br from-purple-500/20 to-purple-600/10 border border-purple-500/20 rounded-xl p-4\">\r\n                        <div className=\"text-3xl font-bold text-purple-400\">{callStats?.month || 0}</div>\r\n                        <div className=\"text-sm text-white/50\">This Month</div>\r\n                    </div>\r\n                    <div className=\"bg-gradient-to-br from-amber-500/20 to-amber-600/10 border border-amber-500/20 rounded-xl p-4\">\r\n                        <div className=\"text-3xl font-bold text-amber-400\">{todayFollowUps?.length || 0}</div>\r\n                        <div className=\"text-sm text-white/50\">Follow-ups Due</div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Tab Navigation */}\r\n                <div className=\"flex gap-2 mb-6\">\r\n                    <button\r\n                        onClick={() => setActiveTab(\"today\")}\r\n                        className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${activeTab === \"today\"\r\n                            ? \"bg-indigo-500 text-white\"\r\n                            : \"bg-white/5 text-white/60 hover:bg-white/10\"\r\n                            }`}\r\n                    >\r\n                        üìû Call Queue\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveTab(\"followups\")}\r\n                        className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${activeTab === \"followups\"\r\n                            ? \"bg-amber-500 text-white\"\r\n                            : \"bg-white/5 text-white/60 hover:bg-white/10\"\r\n                            }`}\r\n                    >\r\n                        ‚è∞ Follow-ups ({todayFollowUps?.length || 0})\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveTab(\"all\")}\r\n                        className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${activeTab === \"all\"\r\n                            ? \"bg-white/20 text-white\"\r\n                            : \"bg-white/5 text-white/60 hover:bg-white/10\"\r\n                            }`}\r\n                    >\r\n                        üìä Activity Feed\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Call Queue */}\r\n                {activeTab === \"today\" && (\r\n                    <div className=\"bg-[#12121f] rounded-xl border border-white/10 overflow-hidden\">\r\n                        <div className=\"p-4 border-b border-white/10\">\r\n                            <h2 className=\"font-semibold\">Call Queue</h2>\r\n                            <p className=\"text-sm text-white/50\">Contacts with phone numbers, sorted by priority</p>\r\n                        </div>\r\n\r\n                        {sortedCallQueue.length > 0 ? (\r\n                            <div className=\"divide-y divide-white/5\">\r\n                                {sortedCallQueue.slice(0, 20).map((contact) => (\r\n                                    <div\r\n                                        key={contact._id}\r\n                                        className=\"p-4 hover:bg-white/5 transition-colors flex items-center gap-4\"\r\n                                    >\r\n                                        {/* Avatar */}\r\n                                        <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center font-bold flex-shrink-0\">\r\n                                            {(contact.name || contact.email).charAt(0).toUpperCase()}\r\n                                        </div>\r\n\r\n                                        {/* Info */}\r\n                                        <div className=\"flex-1 min-w-0\">\r\n                                            <div className=\"font-medium truncate\">{contact.name || contact.email}</div>\r\n                                            <div className=\"text-sm text-white/50 truncate\">{contact.company || contact.email}</div>\r\n                                            {contact.nextFollowUpAt && contact.nextFollowUpAt <= Date.now() && (\r\n                                                <div className=\"text-xs text-amber-400 mt-1\">‚è∞ Follow-up due</div>\r\n                                            )}\r\n                                        </div>\r\n\r\n                                        {/* Stats */}\r\n                                        <div className=\"text-right text-sm text-white/50 hidden md:block\">\r\n                                            <div>{contact.callCount || 0} calls</div>\r\n                                            <div>{contact.lastCallAt ? formatDate(contact.lastCallAt) : \"Never called\"}</div>\r\n                                        </div>\r\n\r\n                                        {/* Actions */}\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <a\r\n                                                href={`tel:${contact.phone}`}\r\n                                                onClick={() => setShowLogCall(contact._id)}\r\n                                                className=\"px-4 py-2 bg-green-500/20 border border-green-500/30 text-green-400 rounded-lg hover:bg-green-500/30 transition-colors flex items-center gap-2\"\r\n                                            >\r\n                                                üìû Call\r\n                                            </a>\r\n                                            <button\r\n                                                onClick={() => setViewContactId(contact._id)}\r\n                                                className=\"px-3 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors text-sm\"\r\n                                            >\r\n                                                View\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"p-12 text-center text-white/40\">\r\n                                <p className=\"text-4xl mb-2\">üìû</p>\r\n                                <p>No contacts with phone numbers</p>\r\n                                <p className=\"text-sm\">Add phone numbers to contacts to start calling</p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Follow-ups Due */}\r\n                {activeTab === \"followups\" && (\r\n                    <div className=\"bg-[#12121f] rounded-xl border border-white/10 overflow-hidden\">\r\n                        <div className=\"p-4 border-b border-white/10\">\r\n                            <h2 className=\"font-semibold\">Follow-ups Due Today</h2>\r\n                            <p className=\"text-sm text-white/50\">Contacts that need your attention</p>\r\n                        </div>\r\n\r\n                        {todayFollowUps && todayFollowUps.length > 0 ? (\r\n                            <div className=\"divide-y divide-white/5\">\r\n                                {todayFollowUps.map((contact) => (\r\n                                    <div\r\n                                        key={contact._id}\r\n                                        className=\"p-4 hover:bg-white/5 transition-colors flex items-center gap-4\"\r\n                                    >\r\n                                        <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center font-bold flex-shrink-0\">\r\n                                            {(contact.name || contact.email).charAt(0).toUpperCase()}\r\n                                        </div>\r\n\r\n                                        <div className=\"flex-1 min-w-0\">\r\n                                            <div className=\"font-medium truncate\">{contact.name || contact.email}</div>\r\n                                            <div className=\"text-sm text-white/50 truncate\">{contact.company || contact.email}</div>\r\n                                            <div className=\"text-xs text-amber-400 mt-1\">\r\n                                                Scheduled: {contact.nextFollowUpAt ? new Date(contact.nextFollowUpAt).toLocaleTimeString() : \"Today\"}\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            {contact.phone && (\r\n                                                <a\r\n                                                    href={`tel:${contact.phone}`}\r\n                                                    onClick={() => setShowLogCall(contact._id)}\r\n                                                    className=\"px-4 py-2 bg-green-500/20 border border-green-500/30 text-green-400 rounded-lg hover:bg-green-500/30 transition-colors\"\r\n                                                >\r\n                                                    üìû Call\r\n                                                </a>\r\n                                            )}\r\n                                            <a\r\n                                                href={`mailto:${contact.email}`}\r\n                                                className=\"px-3 py-2 bg-blue-500/20 border border-blue-500/30 text-blue-400 rounded-lg hover:bg-blue-500/30 transition-colors\"\r\n                                            >\r\n                                                üìß\r\n                                            </a>\r\n                                            <button\r\n                                                onClick={() => setViewContactId(contact._id)}\r\n                                                className=\"px-3 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors text-sm\"\r\n                                            >\r\n                                                View\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"p-12 text-center text-white/40\">\r\n                                <p className=\"text-4xl mb-2\">‚úÖ</p>\r\n                                <p>No follow-ups due today</p>\r\n                                <p className=\"text-sm\">You're all caught up!</p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Activity Feed */}\r\n                {activeTab === \"all\" && (\r\n                    <div className=\"bg-[#12121f] rounded-xl border border-white/10 overflow-hidden\">\r\n                        <div className=\"p-4 border-b border-white/10\">\r\n                            <h2 className=\"font-semibold\">Recent Activity</h2>\r\n                            <p className=\"text-sm text-white/50\">Your latest interactions</p>\r\n                        </div>\r\n\r\n                        {recentActivity && recentActivity.length > 0 ? (\r\n                            <div className=\"divide-y divide-white/5\">\r\n                                {recentActivity.map((activity) => (\r\n                                    <div\r\n                                        key={activity._id}\r\n                                        className=\"p-4 hover:bg-white/5 transition-colors flex items-start gap-3\"\r\n                                    >\r\n                                        <div className=\"text-xl\">{getActivityIcon(activity.type)}</div>\r\n                                        <div className=\"flex-1 min-w-0\">\r\n                                            <div className=\"flex items-center gap-2 flex-wrap\">\r\n                                                <span className=\"font-medium capitalize\">\r\n                                                    {activity.type.replace(/_/g, \" \")}\r\n                                                </span>\r\n                                                {activity.callOutcome && (\r\n                                                    <span\r\n                                                        className=\"px-2 py-0.5 rounded text-xs\"\r\n                                                        style={{\r\n                                                            backgroundColor: `${CALL_OUTCOMES.find(o => o.value === activity.callOutcome)?.color}20`,\r\n                                                            color: CALL_OUTCOMES.find(o => o.value === activity.callOutcome)?.color,\r\n                                                        }}\r\n                                                    >\r\n                                                        {activity.callOutcome.replace(/_/g, \" \")}\r\n                                                    </span>\r\n                                                )}\r\n                                            </div>\r\n                                            {activity.contact && (\r\n                                                <div className=\"text-sm text-white/60 mt-0.5\">\r\n                                                    {activity.contact.name || activity.contact.email}\r\n                                                    {activity.contact.company && ` ‚Ä¢ ${activity.contact.company}`}\r\n                                                </div>\r\n                                            )}\r\n                                            {activity.notes && (\r\n                                                <div className=\"text-sm text-white/50 mt-1\">{activity.notes}</div>\r\n                                            )}\r\n                                        </div>\r\n                                        <div className=\"text-xs text-white/40\">{formatDate(activity.createdAt)}</div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"p-12 text-center text-white/40\">\r\n                                <p className=\"text-4xl mb-2\">üìä</p>\r\n                                <p>No activity yet</p>\r\n                                <p className=\"text-sm\">Start calling or emailing to see activity here</p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </main>\r\n\r\n            {/* Contact Detail Modal */}\r\n            {viewContactId && (\r\n                <ContactDetail\r\n                    contactId={viewContactId}\r\n                    onClose={() => setViewContactId(null)}\r\n                />\r\n            )}\r\n\r\n            {/* Log Call Modal */}\r\n            {showLogCall && (\r\n                <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n                    <div className=\"bg-[#12121f] rounded-xl p-6 w-full max-w-md border border-white/10\">\r\n                        <h3 className=\"text-lg font-bold mb-4\">Log Call Outcome</h3>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-2 mb-4\">\r\n                            {CALL_OUTCOMES.map((outcome) => (\r\n                                <button\r\n                                    key={outcome.value}\r\n                                    onClick={() => setCallOutcome(outcome.value)}\r\n                                    className={`p-3 rounded-lg text-sm font-medium transition-all ${callOutcome === outcome.value\r\n                                        ? \"ring-2 ring-offset-2 ring-offset-[#12121f]\"\r\n                                        : \"opacity-60 hover:opacity-100\"\r\n                                        }`}\r\n                                    style={{\r\n                                        backgroundColor: `${outcome.color}20`,\r\n                                        color: outcome.color,\r\n                                    }}\r\n                                >\r\n                                    {outcome.label}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n\r\n                        <textarea\r\n                            value={callNotes}\r\n                            onChange={(e) => setCallNotes(e.target.value)}\r\n                            placeholder=\"Call notes (optional)\"\r\n                            className=\"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg mb-4 resize-none h-24\"\r\n                        />\r\n\r\n                        <div className=\"mb-4\">\r\n                            <label className=\"text-sm text-white/50 mb-1 block\">Schedule follow-up</label>\r\n                            <input\r\n                                type=\"datetime-local\"\r\n                                value={callFollowUp}\r\n                                onChange={(e) => setCallFollowUp(e.target.value)}\r\n                                className=\"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg\"\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"flex gap-3\">\r\n                            <button\r\n                                onClick={() => {\r\n                                    setShowLogCall(null);\r\n                                    setCallNotes(\"\");\r\n                                    setCallFollowUp(\"\");\r\n                                }}\r\n                                className=\"flex-1 px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors\"\r\n                            >\r\n                                Skip\r\n                            </button>\r\n                            <button\r\n                                onClick={handleLogCall}\r\n                                disabled={loggingCall}\r\n                                className=\"flex-1 px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-lg font-medium disabled:opacity-50\"\r\n                            >\r\n                                {loggingCall ? \"Saving...\" : \"Save & Next\"}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default function CallsPageWrapper() {\r\n    return (\r\n        <AuthGuard>\r\n            <CallsPage />\r\n        </AuthGuard>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2316, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}
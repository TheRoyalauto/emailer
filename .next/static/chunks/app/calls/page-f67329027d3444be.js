(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[948],{8419:(e,t,l)=>{Promise.resolve().then(l.bind(l,7468))},7468:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>x});var s=l(5155),a=l(2115),i=l(4359),r=l(1180),o=l(7916),n=l(646);let c=[{value:"answered",label:"✅ Answered",color:"#22c55e"},{value:"voicemail",label:"\uD83D\uDCDE Voicemail",color:"#f59e0b"},{value:"no_answer",label:"❌ No Answer",color:"#ef4444"},{value:"busy",label:"\uD83D\uDD34 Busy",color:"#f97316"},{value:"wrong_number",label:"⚠️ Wrong Number",color:"#6b7280"},{value:"callback_requested",label:"\uD83D\uDD04 Callback",color:"#3b82f6"}];function d(){let[e,t]=(0,a.useState)(null),[l,d]=(0,a.useState)("today"),[x,m]=(0,a.useState)(null),[h,u]=(0,a.useState)("answered"),[b,p]=(0,a.useState)(""),[g,v]=(0,a.useState)(""),[w,j]=(0,a.useState)(!1),f=(0,i.IT)(r.FH.activities.getCallStats),N=(0,i.IT)(r.FH.activities.getTodayFollowUps),y=(0,i.IT)(r.FH.activities.getRecentActivity,{limit:30}),C=(0,i.IT)(r.FH.contacts.list,{}),D=(0,i.n_)(r.FH.activities.logCall),k=[...(null==C?void 0:C.filter(e=>e.phone&&"active"===e.status))||[]].sort((e,t)=>{let l=e.nextFollowUpAt&&e.nextFollowUpAt<=Date.now(),s=t.nextFollowUpAt&&t.nextFollowUpAt<=Date.now();return l&&!s?-1:!l&&s?1:(e.lastCallAt||0)-(t.lastCallAt||0)}),_=async()=>{if(x){j(!0);try{await D({contactId:x,outcome:h,notes:b||void 0,followUpAt:g?new Date(g).getTime():void 0}),m(null),p(""),v(""),u("answered")}catch(e){console.error(e)}finally{j(!1)}}},A=e=>{let t=new Date(e),l=new Date().getTime()-e;return l<6e4?"Just now":l<36e5?"".concat(Math.floor(l/6e4),"m ago"):l<864e5?"".concat(Math.floor(l/36e5),"h ago"):l<6048e5?"".concat(Math.floor(l/864e5),"d ago"):t.toLocaleDateString()},F=e=>{switch(e){case"email_sent":return"\uD83D\uDCE7";case"email_opened":return"\uD83D\uDC41️";case"call_made":case"voicemail_left":return"\uD83D\uDCDE";case"note_added":return"\uD83D\uDCDD";case"status_changed":return"\uD83D\uDD04";case"follow_up_scheduled":return"⏰";default:return"•"}};return(0,s.jsxs)("div",{className:"min-h-screen bg-[#0a0a0f]",children:[(0,s.jsx)(o.j,{}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-br from-green-500/20 to-green-600/10 border border-green-500/20 rounded-xl p-4",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-green-400",children:(null==f?void 0:f.today)||0}),(0,s.jsx)("div",{className:"text-sm text-white/50",children:"Calls Today"})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-blue-500/20 to-blue-600/10 border border-blue-500/20 rounded-xl p-4",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-blue-400",children:(null==f?void 0:f.week)||0}),(0,s.jsx)("div",{className:"text-sm text-white/50",children:"This Week"})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-purple-500/20 to-purple-600/10 border border-purple-500/20 rounded-xl p-4",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-purple-400",children:(null==f?void 0:f.month)||0}),(0,s.jsx)("div",{className:"text-sm text-white/50",children:"This Month"})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-amber-500/20 to-amber-600/10 border border-amber-500/20 rounded-xl p-4",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-amber-400",children:(null==N?void 0:N.length)||0}),(0,s.jsx)("div",{className:"text-sm text-white/50",children:"Follow-ups Due"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,s.jsx)("button",{onClick:()=>d("today"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat("today"===l?"bg-indigo-500 text-white":"bg-white/5 text-white/60 hover:bg-white/10"),children:"\uD83D\uDCDE Call Queue"}),(0,s.jsxs)("button",{onClick:()=>d("followups"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat("followups"===l?"bg-amber-500 text-white":"bg-white/5 text-white/60 hover:bg-white/10"),children:["⏰ Follow-ups (",(null==N?void 0:N.length)||0,")"]}),(0,s.jsx)("button",{onClick:()=>d("all"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat("all"===l?"bg-white/20 text-white":"bg-white/5 text-white/60 hover:bg-white/10"),children:"\uD83D\uDCCA Activity Feed"})]}),"today"===l&&(0,s.jsxs)("div",{className:"bg-[#12121f] rounded-xl border border-white/10 overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-white/10",children:[(0,s.jsx)("h2",{className:"font-semibold",children:"Call Queue"}),(0,s.jsx)("p",{className:"text-sm text-white/50",children:"Contacts with phone numbers, sorted by priority"})]}),k.length>0?(0,s.jsx)("div",{className:"divide-y divide-white/5",children:k.slice(0,20).map(e=>(0,s.jsxs)("div",{className:"p-4 hover:bg-white/5 transition-colors flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center font-bold flex-shrink-0",children:(e.name||e.email).charAt(0).toUpperCase()}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"font-medium truncate",children:e.name||e.email}),(0,s.jsx)("div",{className:"text-sm text-white/50 truncate",children:e.company||e.email}),e.nextFollowUpAt&&e.nextFollowUpAt<=Date.now()&&(0,s.jsx)("div",{className:"text-xs text-amber-400 mt-1",children:"⏰ Follow-up due"})]}),(0,s.jsxs)("div",{className:"text-right text-sm text-white/50 hidden md:block",children:[(0,s.jsxs)("div",{children:[e.callCount||0," calls"]}),(0,s.jsx)("div",{children:e.lastCallAt?A(e.lastCallAt):"Never called"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("a",{href:"tel:".concat(e.phone),onClick:()=>m(e._id),className:"px-4 py-2 bg-green-500/20 border border-green-500/30 text-green-400 rounded-lg hover:bg-green-500/30 transition-colors flex items-center gap-2",children:"\uD83D\uDCDE Call"}),(0,s.jsx)("button",{onClick:()=>t(e._id),className:"px-3 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors text-sm",children:"View"})]})]},e._id))}):(0,s.jsxs)("div",{className:"p-12 text-center text-white/40",children:[(0,s.jsx)("p",{className:"text-4xl mb-2",children:"\uD83D\uDCDE"}),(0,s.jsx)("p",{children:"No contacts with phone numbers"}),(0,s.jsx)("p",{className:"text-sm",children:"Add phone numbers to contacts to start calling"})]})]}),"followups"===l&&(0,s.jsxs)("div",{className:"bg-[#12121f] rounded-xl border border-white/10 overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-white/10",children:[(0,s.jsx)("h2",{className:"font-semibold",children:"Follow-ups Due Today"}),(0,s.jsx)("p",{className:"text-sm text-white/50",children:"Contacts that need your attention"})]}),N&&N.length>0?(0,s.jsx)("div",{className:"divide-y divide-white/5",children:N.map(e=>(0,s.jsxs)("div",{className:"p-4 hover:bg-white/5 transition-colors flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center font-bold flex-shrink-0",children:(e.name||e.email).charAt(0).toUpperCase()}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"font-medium truncate",children:e.name||e.email}),(0,s.jsx)("div",{className:"text-sm text-white/50 truncate",children:e.company||e.email}),(0,s.jsxs)("div",{className:"text-xs text-amber-400 mt-1",children:["Scheduled: ",e.nextFollowUpAt?new Date(e.nextFollowUpAt).toLocaleTimeString():"Today"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e.phone&&(0,s.jsx)("a",{href:"tel:".concat(e.phone),onClick:()=>m(e._id),className:"px-4 py-2 bg-green-500/20 border border-green-500/30 text-green-400 rounded-lg hover:bg-green-500/30 transition-colors",children:"\uD83D\uDCDE Call"}),(0,s.jsx)("a",{href:"mailto:".concat(e.email),className:"px-3 py-2 bg-blue-500/20 border border-blue-500/30 text-blue-400 rounded-lg hover:bg-blue-500/30 transition-colors",children:"\uD83D\uDCE7"}),(0,s.jsx)("button",{onClick:()=>t(e._id),className:"px-3 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors text-sm",children:"View"})]})]},e._id))}):(0,s.jsxs)("div",{className:"p-12 text-center text-white/40",children:[(0,s.jsx)("p",{className:"text-4xl mb-2",children:"✅"}),(0,s.jsx)("p",{children:"No follow-ups due today"}),(0,s.jsx)("p",{className:"text-sm",children:"You're all caught up!"})]})]}),"all"===l&&(0,s.jsxs)("div",{className:"bg-[#12121f] rounded-xl border border-white/10 overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-white/10",children:[(0,s.jsx)("h2",{className:"font-semibold",children:"Recent Activity"}),(0,s.jsx)("p",{className:"text-sm text-white/50",children:"Your latest interactions"})]}),y&&y.length>0?(0,s.jsx)("div",{className:"divide-y divide-white/5",children:y.map(e=>{var t,l;return(0,s.jsxs)("div",{className:"p-4 hover:bg-white/5 transition-colors flex items-start gap-3",children:[(0,s.jsx)("div",{className:"text-xl",children:F(e.type)}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,s.jsx)("span",{className:"font-medium capitalize",children:e.type.replace(/_/g," ")}),e.callOutcome&&(0,s.jsx)("span",{className:"px-2 py-0.5 rounded text-xs",style:{backgroundColor:"".concat(null===(t=c.find(t=>t.value===e.callOutcome))||void 0===t?void 0:t.color,"20"),color:null===(l=c.find(t=>t.value===e.callOutcome))||void 0===l?void 0:l.color},children:e.callOutcome.replace(/_/g," ")})]}),e.contact&&(0,s.jsxs)("div",{className:"text-sm text-white/60 mt-0.5",children:[e.contact.name||e.contact.email,e.contact.company&&" • ".concat(e.contact.company)]}),e.notes&&(0,s.jsx)("div",{className:"text-sm text-white/50 mt-1",children:e.notes})]}),(0,s.jsx)("div",{className:"text-xs text-white/40",children:A(e.createdAt)})]},e._id)})}):(0,s.jsxs)("div",{className:"p-12 text-center text-white/40",children:[(0,s.jsx)("p",{className:"text-4xl mb-2",children:"\uD83D\uDCCA"}),(0,s.jsx)("p",{children:"No activity yet"}),(0,s.jsx)("p",{className:"text-sm",children:"Start calling or emailing to see activity here"})]})]})]}),e&&(0,s.jsx)(n.A,{contactId:e,onClose:()=>t(null)}),x&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-[#12121f] rounded-xl p-6 w-full max-w-md border border-white/10",children:[(0,s.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Log Call Outcome"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2 mb-4",children:c.map(e=>(0,s.jsx)("button",{onClick:()=>u(e.value),className:"p-3 rounded-lg text-sm font-medium transition-all ".concat(h===e.value?"ring-2 ring-offset-2 ring-offset-[#12121f]":"opacity-60 hover:opacity-100"),style:{backgroundColor:"".concat(e.color,"20"),color:e.color},children:e.label},e.value))}),(0,s.jsx)("textarea",{value:b,onChange:e=>p(e.target.value),placeholder:"Call notes (optional)",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg mb-4 resize-none h-24"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"text-sm text-white/50 mb-1 block",children:"Schedule follow-up"}),(0,s.jsx)("input",{type:"datetime-local",value:g,onChange:e=>v(e.target.value),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg"})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>{m(null),p(""),v("")},className:"flex-1 px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:"Skip"}),(0,s.jsx)("button",{onClick:_,disabled:w,className:"flex-1 px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-lg font-medium disabled:opacity-50",children:w?"Saving...":"Save & Next"})]})]})})]})}function x(){return(0,s.jsx)(o.q,{children:(0,s.jsx)(d,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[190,463,350,23,441,517,358],()=>t(8419)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[161],{6530:(e,l,s)=>{Promise.resolve().then(s.bind(s,6504))},6504:(e,l,s)=>{"use strict";s.r(l),s.d(l,{default:()=>x});var a=s(5155),t=s(2115),n=s(4359),o=s(1180),c=s(7916),i=s(646);let r=[{id:"new",label:"New Leads",color:"#6366f1",icon:"✨"},{id:"contacted",label:"Contacted",color:"#3b82f6",icon:"\uD83D\uDCE7"},{id:"follow_up",label:"Follow Up",color:"#f59e0b",icon:"\uD83D\uDD04"},{id:"qualified",label:"Qualified",color:"#8b5cf6",icon:"⭐"},{id:"closed_won",label:"Closed Won",color:"#22c55e",icon:"\uD83C\uDF89"},{id:"closed_lost",label:"Closed Lost",color:"#ef4444",icon:"❌"}];function d(){var e,l;let[s,d]=(0,t.useState)(null),[x,m]=(0,t.useState)(null),[h,u]=(0,t.useState)(null),p=(0,n.IT)(o.FH.contacts.list,{}),f=(0,n.n_)(o.FH.activities.updateSalesStage),v=r.reduce((e,l)=>(e[l.id]=(p||[]).filter(e=>(e.salesStage||"new")===l.id),e),{}),b=(e,l)=>{m(l),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",l)},g=(e,l)=>{e.preventDefault(),e.dataTransfer.dropEffect="move",u(l)},j=()=>{u(null)},N=async(e,l)=>{if(e.preventDefault(),u(null),x)try{await f({contactId:x,stage:l})}catch(e){console.error("Failed to update stage:",e)}m(null)},w=()=>{m(null),u(null)},C=e=>{let l=Date.now()-e;return l<36e5?"".concat(Math.floor(l/6e4),"m ago"):l<864e5?"".concat(Math.floor(l/36e5),"h ago"):"".concat(Math.floor(l/864e5),"d ago")},D=(null==p?void 0:p.length)||0,y=(null===(e=v.closed_won)||void 0===e?void 0:e.length)||0,_=(null===(l=v.closed_lost)||void 0===l?void 0:l.length)||0;return(0,a.jsxs)("div",{className:"min-h-screen bg-[#0a0a0f] pb-20 md:pb-0",children:[(0,a.jsx)(c.j,{}),(0,a.jsxs)("main",{className:"px-4 sm:px-6 lg:px-8 py-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Sales Pipeline"}),(0,a.jsx)("p",{className:"text-white/50 text-sm",children:"Drag contacts to move through stages"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-white/50",children:"Total:"}),(0,a.jsx)("span",{className:"font-medium",children:D})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-green-400",children:"Won:"}),(0,a.jsx)("span",{className:"font-medium text-green-400",children:y})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-red-400",children:"Lost:"}),(0,a.jsx)("span",{className:"font-medium text-red-400",children:_})]})]})]}),(0,a.jsx)("div",{className:"flex gap-4 overflow-x-auto pb-4 snap-x snap-mandatory",children:r.map(e=>{var l,s;return(0,a.jsxs)("div",{className:"flex-shrink-0 w-72 snap-start transition-all duration-200 ".concat(h===e.id?"scale-[1.02]":""),onDragOver:l=>g(l,e.id),onDragLeave:j,onDrop:l=>N(l,e.id),children:[(0,a.jsxs)("div",{className:"rounded-t-xl p-3 flex items-center justify-between",style:{backgroundColor:"".concat(e.color,"20")},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:e.icon}),(0,a.jsx)("span",{className:"font-medium",style:{color:e.color},children:e.label})]}),(0,a.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-bold",style:{backgroundColor:e.color,color:"#000"},children:(null===(l=v[e.id])||void 0===l?void 0:l.length)||0})]}),(0,a.jsxs)("div",{className:"bg-[#12121f] rounded-b-xl border border-white/10 min-h-[400px] p-2 space-y-2 transition-colors ".concat(h===e.id?"border-2":""),style:{borderColor:h===e.id?e.color:void 0},children:[null===(s=v[e.id])||void 0===s?void 0:s.map(l=>{var s,t;return(0,a.jsxs)("div",{draggable:!0,onDragStart:e=>b(e,l._id),onDragEnd:w,onClick:()=>d(l._id),className:"bg-black/40 rounded-lg p-3 cursor-grab active:cursor-grabbing hover:bg-black/60 transition-all border border-white/5 hover:border-white/20 ".concat(x===l._id?"opacity-50 scale-95":""),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0",style:{backgroundColor:"".concat(e.color,"30"),color:e.color},children:(l.name||l.email).charAt(0).toUpperCase()}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-sm truncate",children:l.name||l.email.split("@")[0]}),l.company&&(0,a.jsx)("div",{className:"text-xs text-white/50 truncate",children:l.company})]})]}),(0,a.jsx)("div",{className:"text-xs text-white/40 truncate mb-2",children:l.email}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-xs text-white/50",children:[(null!==(s=l.emailCount)&&void 0!==s?s:0)>0&&(0,a.jsxs)("span",{className:"flex items-center gap-1",children:["\uD83D\uDCE7 ",l.emailCount]}),(null!==(t=l.callCount)&&void 0!==t?t:0)>0&&(0,a.jsxs)("span",{className:"flex items-center gap-1",children:["\uD83D\uDCDE ",l.callCount]}),l.lastEmailAt&&(0,a.jsx)("span",{className:"text-white/30",children:C(l.lastEmailAt)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-2 pt-2 border-t border-white/5",children:[l.phone&&(0,a.jsx)("a",{href:"tel:".concat(l.phone),onClick:e=>e.stopPropagation(),className:"p-1.5 hover:bg-green-500/20 rounded text-green-400 transition-colors",title:"Call",children:"\uD83D\uDCDE"}),(0,a.jsx)("a",{href:"mailto:".concat(l.email),onClick:e=>e.stopPropagation(),className:"p-1.5 hover:bg-blue-500/20 rounded text-blue-400 transition-colors",title:"Email",children:"✉️"})]})]},l._id)}),(!v[e.id]||0===v[e.id].length)&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-32 text-white/20 text-sm",children:[(0,a.jsx)("span",{className:"text-2xl mb-1",children:e.icon}),(0,a.jsx)("span",{children:"Drop contacts here"})]})]})]},e.id)})})]}),s&&(0,a.jsx)(i.A,{contactId:s,onClose:()=>d(null)})]})}function x(){return(0,a.jsx)(c.q,{children:(0,a.jsx)(d,{})})}}},e=>{var l=l=>e(e.s=l);e.O(0,[190,463,350,23,441,517,358],()=>l(6530)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[147],{6020:(e,t,s)=>{Promise.resolve().then(s.bind(s,6208))},1180:(e,t,s)=>{"use strict";s.d(t,{FH:()=>i});var a=s(5350);let i=a.dp;(0,a.Op)()},6208:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(5155),i=s(2115),l=s(4359),n=s(1180),r=s(7916);let o=["Find me 20 auto body shops in Los Angeles, California","Get contact emails for collision repair centers in Miami","Search for insurance adjusters in the Houston area","Find body shop owners in Chicago with their phone numbers"];function c(){let[e,t]=(0,i.useState)(""),[s,c]=(0,i.useState)(!1),[d,h]=(0,i.useState)([]),[x,m]=(0,i.useState)(new Set),[p,b]=(0,i.useState)(!1),[u,g]=(0,i.useState)(null),[f,w]=(0,i.useState)(null),[j,v]=(0,i.useState)(!1),N=(0,l.IT)(n.FH.batches.list),[y,k]=(0,i.useState)(""),[S,C]=(0,i.useState)(!1),[D,_]=(0,i.useState)(""),E=(0,l.n_)(n.FH.contacts.bulkCreate),F=(0,l.n_)(n.FH.batches.create),I=(0,l.IT)(n.FH.leadSearches.list),A=(0,l.n_)(n.FH.leadSearches.create),L=(0,l.n_)(n.FH.leadSearches.clearAll),z=(0,l.IT)(n.FH.contacts.list,{}),H=(0,i.useMemo)(()=>new Set((null==z?void 0:z.map(e=>e.email.toLowerCase()))||[]),[z]),O=(0,i.useMemo)(()=>d.filter(e=>H.has(e.email.toLowerCase())).length,[d,H]),P=async()=>{if(e.trim()){c(!0),w(null),h([]),g(null);try{var t;let s=await fetch("/api/scrape-leads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e})}),a=s.headers.get("content-type");if(!a||!a.includes("application/json"))throw Error("Lead generation service unavailable. Please check API configuration.");let i=await s.json();if(!s.ok)throw Error(i.error||"Failed to scrape leads");let l=(i.contacts||[]).map(e=>({...e,isDuplicate:H.has(e.email.toLowerCase())}));h(l);let n=l.map((e,t)=>e.isDuplicate?-1:t).filter(e=>e>=0);m(new Set(n)),(null===(t=i.contacts)||void 0===t?void 0:t.length)>0&&await A({prompt:e.trim(),resultsCount:i.contacts.length})}catch(e){w(e instanceof Error?e.message:"Failed to scrape leads")}finally{c(!1)}}},T=e=>{let t=new Set(x);t.has(e)?t.delete(e):t.add(e),m(t)},q=()=>{x.size===d.length?m(new Set):m(new Set(d.map((e,t)=>t)))},R=async()=>{if(0!==x.size){b(!0),w(null);try{let e;S&&D.trim()?e=await F({name:D.trim()}):y&&(e=y);let s=d.filter((e,t)=>x.has(t)).map(e=>({email:e.email,name:e.name,company:e.company,phone:e.phone,location:e.location,website:e.website,address:e.address}));await E({contacts:s,batchId:e}),g(s.length),h([]),m(new Set),t(""),_(""),C(!1)}catch(e){w(e instanceof Error?e.message:"Failed to import contacts")}finally{b(!1)}}};return(0,a.jsxs)("div",{className:"min-h-screen bg-[#0a0a0f] pb-20 md:pb-0",children:[(0,a.jsx)(r.j,{}),(0,a.jsxs)("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",children:(0,a.jsx)("span",{className:"bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"AI Lead Scraper"})}),(0,a.jsx)("p",{className:"text-white/50",children:"Describe the leads you want and AI will find them for you"})]}),(0,a.jsxs)("div",{className:"bg-[#12121f] rounded-xl border border-white/10 p-6 mb-6",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("textarea",{value:e,onChange:e=>t(e.target.value),placeholder:"Describe the leads you're looking for...",className:"w-full h-32 px-4 py-3 bg-black/40 border border-white/10 rounded-xl focus:outline-none focus:border-indigo-500 resize-none text-lg",onKeyDown:e=>{"Enter"===e.key&&e.metaKey&&P()}}),(0,a.jsx)("div",{className:"absolute bottom-3 right-3 text-xs text-white/30",children:"⌘ + Enter to search"})]}),(0,a.jsxs)("div",{className:"mt-4 flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-xs text-white/40 mb-2",children:"Try these:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:o.map((e,s)=>(0,a.jsx)("button",{onClick:()=>t(e),className:"px-3 py-1.5 bg-white/5 hover:bg-white/10 rounded-lg text-sm text-white/60 hover:text-white transition-colors",children:e},s))})]}),I&&I.length>0&&(0,a.jsxs)("button",{onClick:()=>v(!j),className:"px-3 py-1.5 bg-indigo-500/20 hover:bg-indigo-500/30 rounded-lg text-sm text-indigo-400 transition-colors flex items-center gap-1",children:["\uD83D\uDD50 History (",I.length,")"]})]}),j&&I&&I.length>0&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-black/40 rounded-xl border border-white/10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-white/70",children:"Recent Searches"}),(0,a.jsx)("button",{onClick:async()=>{await L({}),v(!1)},className:"text-xs text-red-400 hover:text-red-300",children:"Clear All"})]}),(0,a.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:I.map(e=>(0,a.jsxs)("button",{onClick:()=>{t(e.prompt),v(!1)},className:"w-full text-left p-2 rounded-lg bg-white/5 hover:bg-white/10 transition-colors",children:[(0,a.jsx)("div",{className:"text-sm truncate",children:e.prompt}),(0,a.jsxs)("div",{className:"text-xs text-white/40 flex items-center gap-2 mt-1",children:[(0,a.jsxs)("span",{children:[e.resultsCount," leads found"]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString()})]})]},e._id))})]}),(0,a.jsx)("button",{onClick:P,disabled:!e.trim()||s,className:"mt-4 w-full py-3 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-xl font-semibold text-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all hover:shadow-lg hover:shadow-indigo-500/20",children:s?(0,a.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Searching with AI..."]}):"\uD83D\uDD0D Find Leads"})]}),d.length>0&&O>0&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-xl text-yellow-400 flex items-center gap-2",children:[(0,a.jsx)("span",{children:"⚠️"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{children:O})," of ",d.length," leads already exist in your contacts. Duplicates are deselected by default."]})]}),f&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-xl text-red-400 flex items-center gap-2",children:[(0,a.jsx)("span",{children:"⚠️"}),f]}),u&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-green-500/10 border border-green-500/20 rounded-xl text-green-400 flex items-center gap-2",children:[(0,a.jsx)("span",{children:"✅"}),"Successfully imported ",u," contacts!"]}),d.length>0&&(0,a.jsxs)("div",{className:"bg-[#12121f] rounded-xl border border-white/10 overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-white/10 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:q,className:"p-1",children:(0,a.jsx)("input",{type:"checkbox",checked:x.size===d.length,onChange:q,className:"w-4 h-4 rounded bg-white/10 border-white/20 text-indigo-500"})}),(0,a.jsxs)("span",{className:"font-semibold",children:["Found ",d.length," leads"]}),(0,a.jsxs)("span",{className:"text-white/50 text-sm",children:["(",x.size," selected)"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[S?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"text",value:D,onChange:e=>_(e.target.value),placeholder:"New batch name...",className:"px-3 py-1.5 bg-black/40 border border-white/10 rounded-lg text-sm w-40",autoFocus:!0}),(0,a.jsx)("button",{onClick:()=>{C(!1),_("")},className:"text-white/50 hover:text-white text-sm",children:"✕"})]}):(0,a.jsxs)("select",{value:y,onChange:e=>{"__new__"===e.target.value?(C(!0),k("")):k(e.target.value)},className:"px-3 py-1.5 bg-black/40 border border-white/10 rounded-lg text-sm",children:[(0,a.jsx)("option",{value:"",children:"No batch"}),(0,a.jsx)("option",{value:"__new__",children:"➕ Create New Batch"}),null==N?void 0:N.map(e=>(0,a.jsx)("option",{value:e._id,children:e.name},e._id))]}),(0,a.jsx)("button",{onClick:()=>{let e=new Blob([["Name,Email,Company,Phone,Location,Website,Address",...d.filter((e,t)=>x.has(t)).map(e=>[e.name,e.email,e.company,e.phone,e.location,e.website,e.address].map(e=>'"'.concat((e||"").replace(/"/g,'""'),'"')).join(","))].join("\n")],{type:"text/csv"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="leads-".concat(new Date().toISOString().split("T")[0],".csv"),s.click()},disabled:0===x.size,className:"px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-lg font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"\uD83D\uDCE5 Export CSV"}),(0,a.jsx)("button",{onClick:R,disabled:0===x.size||p||S&&!D.trim(),className:"px-4 py-1.5 bg-green-500 hover:bg-green-600 rounded-lg font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p?"Importing...":"Import ".concat(x.size)})]})]}),(0,a.jsx)("div",{className:"divide-y divide-white/5 max-h-[400px] overflow-y-auto",children:d.map((e,t)=>(0,a.jsxs)("div",{onClick:()=>T(t),className:"p-4 flex items-center gap-4 cursor-pointer hover:bg-white/5 transition-colors ".concat(x.has(t)?"bg-indigo-500/10":""),children:[(0,a.jsx)("input",{type:"checkbox",checked:x.has(t),onChange:()=>T(t),className:"w-4 h-4 rounded bg-white/10 border-white/20 text-indigo-500"}),(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center font-bold flex-shrink-0",children:(e.name||e.email).charAt(0).toUpperCase()}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium truncate",children:e.name||e.email.split("@")[0]}),e.company&&(0,a.jsxs)("span",{className:"text-white/50 text-sm truncate",children:["• ",e.company]}),e.isDuplicate&&(0,a.jsx)("span",{className:"px-1.5 py-0.5 bg-yellow-500/20 text-yellow-400 text-xs rounded",children:"Duplicate"})]}),(0,a.jsx)("div",{className:"text-sm text-white/50 truncate",children:e.email})]}),e.leadScore&&(0,a.jsx)("div",{className:"px-2 py-1 rounded-lg text-xs font-semibold flex-shrink-0 ".concat(e.leadScore>=80?"bg-green-500/20 text-green-400":e.leadScore>=60?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"),children:e.leadScore}),(0,a.jsxs)("div",{className:"text-right text-sm text-white/40 hidden md:block flex-shrink-0",children:[e.phone&&(0,a.jsx)("div",{children:e.phone}),e.location&&(0,a.jsx)("div",{children:e.location}),e.website&&(0,a.jsx)("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"text-indigo-400 hover:text-indigo-300 truncate block max-w-[200px]",children:"\uD83C\uDF10 Website"})]})]},t))})]}),!s&&0===d.length&&!u&&(0,a.jsxs)("div",{className:"text-center py-12 text-white/30",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83E\uDD16"}),(0,a.jsx)("p",{children:"Enter a prompt above to start finding leads"})]})]})]})}function d(){return(0,a.jsx)(r.q,{children:(0,a.jsx)(c,{})})}},7916:(e,t,s)=>{"use strict";s.d(t,{j:()=>x,q:()=>c});var a=s(5155),i=s(4359),l=s(7190),n=s(6046),r=s(2115),o=s(7396);function c(e){let{children:t}=e,{isAuthenticated:s,isLoading:l}=(0,i.Z)(),o=(0,n.useRouter)();return((0,r.useEffect)(()=>{l||s||o.push("/login")},[s,l,o]),l)?(0,a.jsx)("div",{className:"min-h-screen bg-[#0a0a0f] text-white flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-indigo-500 border-t-transparent rounded-full"}),(0,a.jsx)("p",{className:"text-white/50",children:"Loading..."})]})}):s?(0,a.jsx)(a.Fragment,{children:t}):null}let d=[{href:"/dashboard",label:"Dashboard",icon:"\uD83C\uDFE0",mobileIcon:"\uD83C\uDFE0"},{href:"/campaigns",label:"Campaigns",icon:"\uD83D\uDCE7",mobileIcon:"\uD83D\uDCE7"},{href:"/contacts",label:"Contacts",icon:"\uD83D\uDC65",mobileIcon:"\uD83D\uDC65"},{href:"/pipeline",label:"Pipeline",icon:"\uD83D\uDCCA",mobileIcon:"\uD83D\uDCCA"},{href:"/sequences",label:"Sequences",icon:"\uD83D\uDD04",mobileIcon:"\uD83D\uDD04"},{href:"/insights",label:"Insights",icon:"\uD83D\uDCC8",mobileIcon:"\uD83D\uDCC8"},{href:"/settings",label:"Settings",icon:"⚙️",mobileIcon:"⚙️"}],h=d.slice(0,5);function x(){let{signOut:e}=(0,l.BG)(),t=(0,n.usePathname)(),[s,i]=(0,r.useState)(!1),c=async()=>{await e()},x=e=>"/dashboard"===e?"/"===t||"/dashboard"===t:t.startsWith(e);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("header",{className:"border-b border-white/10 bg-[#0a0a0f]/95 sticky top-0 z-50 backdrop-blur-lg hidden md:block",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-3 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-8",children:[(0,a.jsx)(o.default,{href:"/dashboard",className:"text-2xl font-bold bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400 bg-clip-text text-transparent hover:opacity-80 transition-opacity",children:"Emailer"}),(0,a.jsx)("nav",{className:"flex items-center gap-1",children:d.map(e=>(0,a.jsxs)(o.default,{href:e.href,className:"px-3 py-2 rounded-lg text-sm font-medium transition-all flex items-center gap-1.5 ".concat(x(e.href)?"bg-white/10 text-white":"text-white/60 hover:text-white hover:bg-white/5"),children:[(0,a.jsx)("span",{className:"text-sm",children:e.icon}),(0,a.jsx)("span",{className:"hidden lg:inline",children:e.label})]},e.href))})]}),(0,a.jsx)("button",{onClick:c,className:"px-4 py-2 text-sm text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-colors",children:"Sign Out"})]})}),(0,a.jsxs)("header",{className:"border-b border-white/10 bg-[#0a0a0f]/95 sticky top-0 z-50 backdrop-blur-lg md:hidden",children:[(0,a.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",children:[(0,a.jsx)(o.default,{href:"/dashboard",className:"text-xl font-bold bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Emailer"}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("button",{onClick:()=>i(!s),className:"p-2 text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-colors",children:s?"✕":"☰"})})]}),s&&(0,a.jsxs)("div",{className:"absolute top-full left-0 right-0 bg-[#12121f] border-b border-white/10 p-4 space-y-2",children:[d.map(e=>(0,a.jsxs)(o.default,{href:e.href,onClick:()=>i(!1),className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ".concat(x(e.href)?"bg-indigo-500/20 text-indigo-400":"text-white/60 hover:bg-white/5 hover:text-white"),children:[(0,a.jsx)("span",{className:"text-xl",children:e.icon}),(0,a.jsx)("span",{className:"font-medium",children:e.label})]},e.href)),(0,a.jsx)("hr",{className:"border-white/10 my-3"}),(0,a.jsxs)("button",{onClick:c,className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-red-400 hover:bg-red-500/10 transition-colors",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83D\uDEAA"}),(0,a.jsx)("span",{className:"font-medium",children:"Sign Out"})]})]})]}),(0,a.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-[#0a0a0f]/98 backdrop-blur-lg border-t border-white/10 z-50 md:hidden pb-safe",children:(0,a.jsx)("div",{className:"flex items-center justify-around py-2 px-1",children:h.map(e=>(0,a.jsxs)(o.default,{href:e.href,className:"flex flex-col items-center gap-0.5 py-1.5 px-2 rounded-xl transition-all min-w-[56px] ".concat(x(e.href)?"text-indigo-400 bg-indigo-500/10":"text-white/40"),children:[(0,a.jsx)("span",{className:"text-lg",children:e.mobileIcon}),(0,a.jsx)("span",{className:"text-[10px] font-medium",children:e.label})]},e.href))})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[190,463,350,441,517,358],()=>t(6020)),_N_E=e.O()}]);